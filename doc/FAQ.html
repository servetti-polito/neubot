<!-- Autogenerated Tue Mar 12 11:12:42 CET 2013 -->



<div class="section" id="index">
<h2>0. Index</h2>
<ul>
<li><p class="first"><a class="reference internal" href="#index">0. Index</a></p>
</li>
<li><p class="first"><a class="reference internal" href="#general-questions">1. General questions</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#what-is-neubot">1.1. What is Neubot?</a></li>
<li><a class="reference internal" href="#what-is-measurement-lab">1.2. What is Measurement Lab?</a></li>
<li><a class="reference internal" href="#what-is-network-neutrality">1.3. What is network neutrality?</a></li>
<li><a class="reference internal" href="#why-the-network-neutrality-bot">1.4. Why &quot;the network neutrality bot&quot;?</a></li>
<li><a class="reference internal" href="#why-is-it-crucial-to-monitor-network-neutrality">1.5. Why is it crucial to monitor network neutrality?</a></li>
<li><a class="reference internal" href="#why-might-i-want-to-install-neubot">1.6. Why might I want to install Neubot?</a></li>
<li><a class="reference internal" href="#what-tests-are-implemented-by-the-latest-version">1.7. What tests are implemented by the latest version?</a></li>
<li><a class="reference internal" href="#what-is-the-roadmap-to-neubot-1-0-0-0">1.8. What is the roadmap to Neubot 1.0.0.0?</a></li>
<li><a class="reference internal" href="#when-is-the-next-release-of-neubot">1.9. When is the next release of Neubot?</a></li>
<li><a class="reference internal" href="#what-is-your-versioning-policy">1.10. What is your versioning policy?</a></li>
<li><a class="reference internal" href="#what-is-the-best-version-of-neubot">1.11. What is the best version of Neubot?</a></li>
<li><a class="reference internal" href="#how-long-should-i-keep-neubot-installed">1.12. How long should I keep Neubot installed?</a></li>
<li><a class="reference internal" href="#how-much-do-you-test-neubot-before-release">1.13. How much do you test Neubot before release?</a></li>
<li><a class="reference internal" href="#who-develops-neubot">1.14. Who develops Neubot?</a></li>
<li><a class="reference internal" href="#under-what-license-is-neubot-available">1.15. Under what license is Neubot available?</a></li>
<li><a class="reference internal" href="#how-much-does-neubot-cost">1.16. How much does Neubot cost?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#installing-neubot">2. Installing Neubot</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#on-what-systems-does-neubot-run">2.1. On what systems does neubot run?</a></li>
<li><a class="reference internal" href="#how-do-i-install-neubot">2.2. How do I install neubot?</a></li>
<li><a class="reference internal" href="#how-do-i-install-neubot-on-freebsd">2.3. How do I install Neubot on FreeBSD?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#using-neubot">3. Using Neubot</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#neubot-installed-what-should-i-do-now">3.1. Neubot installed. What should I do now?</a></li>
<li><a class="reference internal" href="#how-many-resources-does-neubot-need">3.2. How many resources does Neubot need?</a></li>
<li><a class="reference internal" href="#how-do-i-report-bugs-ask-questions-or-make-suggestions">3.3. How do I report bugs, ask questions, or make suggestions?</a></li>
<li><a class="reference internal" href="#what-are-the-issues-if-i-use-mobile-broadband-3g-modem-internet-key">3.4. What are the issues if I use mobile broadband, 3G modem, Internet key?</a></li>
<li><a class="reference internal" href="#do-i-need-to-tweak-the-configuration-of-my-router">3.5. Do I need to tweak the configuration of my router?</a></li>
<li><a class="reference internal" href="#how-do-i-read-neubot-logs">3.6. How do I read Neubot logs?</a></li>
<li><a class="reference internal" href="#do-i-have-to-periodically-rotate-log-files">3.7. Do I have to periodically rotate log files?</a></li>
<li><a class="reference internal" href="#do-i-have-to-periodically-rotate-the-database">3.8. Do I have to periodically rotate the database?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#technical-questions">4. Technical questions</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#how-does-neubot-work">4.1. How does Neubot work?</a></li>
<li><a class="reference internal" href="#what-does-speedtest-test-measure">4.2. What does speedtest test measure?</a></li>
<li><a class="reference internal" href="#how-does-neubot-change-my-windows-registry">4.3. How does Neubot change my Windows registry?</a></li>
<li><a class="reference internal" href="#what-is-the-path-of-neubot-database">4.4. What is the path of Neubot database?</a></li>
<li><a class="reference internal" href="#how-can-i-dump-the-content-of-the-database">4.5. How can I dump the content of the database?</a></li>
<li><a class="reference internal" href="#what-does-bittorrent-test-measure">4.6. What does bittorrent test measure?</a></li>
<li><a class="reference internal" href="#what-does-measuring-goodput-mean">4.7. What does measuring goodput mean?</a></li>
<li><a class="reference internal" href="#is-it-possible-to-compare-speedtest-and-bittorrent-results">4.8. Is it possible to compare speedtest and bittorrent results?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#privacy-questions">5. Privacy questions</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#what-personal-data-does-neubot-collect">5.1. What personal data does Neubot collect?</a></li>
<li><a class="reference internal" href="#will-you-publish-my-ip-address">5.2. Will you publish my IP address?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#data-questions">6. Data questions</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#where-is-data-published">6.1. Where is data published?</a></li>
<li><a class="reference internal" href="#is-there-any-license-attached-to-data">6.2. Is there any license attached to data?</a></li>
<li><a class="reference internal" href="#what-is-data-format">6.3. What is data format?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#web-user-interface">7. Web user interface</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#what-is-the-web-user-interface">7.1. What is the web user interface?</a></li>
<li><a class="reference internal" href="#how-do-i-open-the-web-user-interface">7.2. How do I open the web user interface?</a></li>
<li><a class="reference internal" href="#what-does-the-status-page-show">7.3. What does the status page show?</a></li>
<li><a class="reference internal" href="#what-does-the-speedtest-page-show">7.4. What does the speedtest page show?</a></li>
<li><a class="reference internal" href="#what-does-the-bittorrent-page-show">7.5. What does the bittorrent page show?</a></li>
<li><a class="reference internal" href="#what-does-the-log-page-show">7.6. What does the log page show?</a></li>
<li><a class="reference internal" href="#what-does-the-privacy-page-show">7.7. What does the privacy page show?</a></li>
<li><a class="reference internal" href="#what-does-the-settings-page-show">7.8. What does the settings page show?</a></li>
<li><a class="reference internal" href="#how-do-i-change-the-web-user-interface-language">7.9. How do I change the web user interface language?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#following-development">8. Following development</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#how-do-i-clone-neubot-repository">8.1. How do I clone Neubot repository?</a></li>
<li><a class="reference internal" href="#how-do-i-prepare-a-diff-for-neubot">8.2. How do I prepare a diff for Neubot?</a></li>
</ul>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#localhost-web-api">9. Localhost web API</a></p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="#how-do-i-get-a-a-list-of-apis">9.1. How do I get a a list of APIs?</a></li>
<li><a class="reference internal" href="#how-do-i-get-test-data">9.2. How do I get test data?</a></li>
<li><a class="reference internal" href="#how-do-i-get-set-configuration-variables">9.3. How do I get/set configuration variables?</a></li>
<li><a class="reference internal" href="#how-do-i-start-a-test">9.4. How do I start a test?</a></li>
<li><a class="reference internal" href="#how-do-i-get-debugging-info">9.5. How do I get debugging info?</a></li>
<li><a class="reference internal" href="#home-page-redirections">9.6. Home page redirections</a></li>
<li><a class="reference internal" href="#how-do-i-force-neubot-to-exit">9.7. How do I force Neubot to exit?</a></li>
<li><a class="reference internal" href="#how-do-i-track-neubot-state">9.8. How do I track Neubot state?</a></li>
</ul>
</blockquote>
</li>
</ul>
</div>
<hr class="docutils"/>
<div class="section" id="general-questions">
<h2>1. General questions</h2>
<div class="section" id="what-is-neubot">
<h3>1.1. What is Neubot?</h3>
<p>Neubot is a research project on network neutrality by the <a class="reference external" href="http://nexa.polito.it/">Nexa Center for
Internet &amp; Society</a> at <a class="reference external" href="http://www.dauin.polito.it/">Politecnico di Torino (DAUIN)</a>.  The project is
based on a lightweight <a class="reference external" href="https://github.com/neubot/neubot/blob/master/COPYING">free software</a> computer program that interested
users can download and install on their computers.  The program runs in the
background and periodically performs transmission tests with servers
hosted by the distributed <a class="reference external" href="http://www.measurementlab.net/about">Measurement Lab</a> platform, and, in the future,
with other instances of Neubot.  Transmission tests measure network performance
with various application-level protocols.  Test results are saved both
locally and on the test servers.  Data is collected for research purposes
and <a class="reference external" href="http://www.neubot.org/data">published on the web</a> under Creative Commons Zero allowing anyone
to re-use it freely for the same purpose.</p>
</div>
<div class="section" id="what-is-measurement-lab">
<h3>1.2. What is Measurement Lab?</h3>
<p>Measurement Lab (<a class="reference external" href="http://www.measurementlab.net/about">M-Lab</a>) is a distributed server platform that provides
connectivity and servers around the world for projects that aim to
measure the quality and/or neutrality of broadband Internet connections
by probing the network with active tests.  It also provides additional
services, e.g., server discovery APIs, automatic data collection and
publishing, support for gathering network-stack level statistics.</p>
<p>From version 0.4.6 onward Neubot is hosted at Measurement Lab.  Since
version 0.4.8, all tests are carried out by Measurement Lab servers.</p>
</div>
<div class="section" id="what-is-network-neutrality">
<h3>1.3. What is network neutrality?</h3>
<p>Network neutrality is the principle that the Internet should be neutral
with respect to kinds of applications, senders and destinations. In
other words, a network is neutral when <a class="reference external" href="http://en.wikipedia.org/wiki/Router_(computing)">routers</a> forward packets using
a <em>first come, first served</em> strategy.  Instead, it is not neutral when
certain packets receive a preferential treatment.</p>
<p>The ancient Internet was strictly neutral, because it was designed
to minimize the interaction between applications and the network
(see <a class="reference external" href="http://tools.ietf.org/html/rfc3439#section-2.1">RFC3439</a>). This design choice allowed very fast packet switching
and enabled strong openness towards unforeseen uses of the Internet
Protocol. The result was an extraordinary outburst of innovation
and a level-playing field for citizens, associations, and companies
worldwide.</p>
<p>The modern Internet is not always neutral because some technologies
allow for fine-grained discrimination of traffic. When they enter into
the network of an Internet Service Provider, packets are <em>classified</em>
(i.e., assigned to a class like <em>web</em>, <em>video</em>, or <em>file-sharing</em>).
The most commonly exploited characteristics in traffic classification
are the content of packets headers and the payload. But a packet can
also inherit the class from the flow it belongs to if it is
already classified. Once a packet has been classified at the border
of the network it is treated accordingly by network routers.</p>
<p>The policy debate regarding network neutrality is on whether it is
preferable to continue with <em>laissez-faire</em> or to safeguard it.
This topic can be tackled from a variety of disciplines,
including competition law and innovation processes. To know more about
network neutrality, the related debate and the various positions go
to <a class="reference external" href="http://en.wikipedia.org/wiki/Network_neutrality">Wikipedia's article</a>.</p>
</div>
<div class="section" id="why-the-network-neutrality-bot">
<h3>1.4. Why <em>&quot;the network neutrality bot&quot;</em>?</h3>
<p>The program is called <em>network neutrality bot</em> because it is a
<a class="reference external" href="http://en.wikipedia.org/wiki/Internet_bot">software application that runs automated tasks over the Internet</a>
to collect data meaningful to study network neutrality.</p>
</div>
<div class="section" id="why-is-it-crucial-to-monitor-network-neutrality">
<h3>1.5. Why is it crucial to monitor network neutrality?</h3>
<p>Monitoring network neutrality is crucial because it enables a deeper
understanding of Internet Service Providers (ISPs) behavior. This
is paramount <em>ex-ante</em>, i.e., at a time when there is a broad discussion
regarding changes in network neutrality policies. The availability of
quantitative datasets collected by independent researchers should
rebalance, at least in part, the deep information asymmetry between
ISPs and other interested stakeholders (including regulators and
citizens). In turn, providing a more reliable basis for discussing
network neutrality policies.</p>
<p>Monitoring network neutrality is crucial in an <em>ex-post</em> scenario
as well. Indeed, it enables independent researchers to verify operators
behavior in light of regulatory decisions on the matter.</p>
</div>
<div class="section" id="why-might-i-want-to-install-neubot">
<h3>1.6. Why might I want to install Neubot?</h3>
<p>You might want to install Neubot if you care about network neutrality,
wish to support this research project and are willing to donate it a
fraction of your network capacity to run its tests. You will contribute
to build a quantitative dataset of data meaningful to study the
network neutrality. The availability of which will allow for a more
democratic decisional process about the Internet, one of the key
infrastructures of our societies.</p>
<p>Another reason to install it is that it provides you with a brief
picture of how your Internet connection works at different hours
and using different protocols. You can compare Neubot results with
other tests' results to achieve a more in-depth understanding of
the behavior of your home network and ISP.</p>
<p>If you are interested, don't hesitate to install it. The success of
this project depends heavily on how many people install it.</p>
</div>
<div class="section" id="what-tests-are-implemented-by-the-latest-version">
<h3>1.7. What tests are implemented by the latest version?</h3>
<p>The latest version of Neubot implements the following tests:</p>
<dl class="docutils">
<dt><strong>bittorrent</strong></dt>
<dd>It emulates the <a class="reference external" href="http://www.bittorrent.org/beps/bep_0003.html">BitTorrent peer-wire protocol</a> and measures
<a class="reference external" href="http://en.wikipedia.org/wiki/Round-trip_delay_time">round trip time</a>, download and upload <a class="reference external" href="http://en.wikipedia.org/wiki/Goodput">goodput</a>.</dd>
<dt><strong>raw</strong></dt>
<dd>It does not emulate any protocol and performs a download-only
<em>raw</em> TCP test.  It measures <a class="reference external" href="http://en.wikipedia.org/wiki/Round-trip_delay_time">round trip time</a> and download
<a class="reference external" href="http://en.wikipedia.org/wiki/Goodput">goodput</a>.  In addition, it also saves CPU uage information and
TCP/IP stack statistics.</dd>
<dt><strong>speedtest</strong></dt>
<dd><p class="first">It is an HTTP client-server test and measures <a class="reference external" href="http://en.wikipedia.org/wiki/Round-trip_delay_time">round trip time</a>,
download and upload <a class="reference external" href="http://en.wikipedia.org/wiki/Goodput">goodput</a>.</p>
<p class="last">The initial implementation was inspired to the test provided by
<a class="reference external" href="http://www.speedtest.net">speedtest.net</a>, hence the name.</p>
</dd>
</dl>
<p>If you're interested, you can get more details on them in
the <a class="reference internal" href="#technical-questions">4. Technical questions</a> section.</p>
</div>
<div class="section" id="what-is-the-roadmap-to-neubot-1-0-0-0">
<h3>1.8. What is the roadmap to Neubot 1.0.0.0?</h3>
<p>Neubot 1.0.0.0 will be able to perform client-server and peer-to-peer
transmission tests using multiple application level protocols.
The <a class="reference external" href="https://github.com/neubot/neubot/wiki/roadmap">roadmap</a> and <a class="reference external" href="https://github.com/neubot/neubot/wiki/todo">TODO</a> list are now updated and maintained on the
<a class="reference external" href="https://github.com/neubot/neubot/wiki">github's wiki</a>.</p>
</div>
<div class="section" id="when-is-the-next-release-of-neubot">
<h3>1.9. When is the next release of Neubot?</h3>
<p>The release process strives to <a class="reference external" href="http://www.catb.org/esr/writings/cathedral-bazaar/cathedral-bazaar/ar01s04.html">release early, release often</a> to
maximize feedback.  The <a class="reference external" href="https://github.com/neubot/neubot">github repository</a> is updated very frequently
and there is a commitment to deploy a new release every month.</p>
</div>
<div class="section" id="what-is-your-versioning-policy">
<h3>1.10. What is your versioning policy?</h3>
<p>Neubot follows the well-known <em>major</em>, <em>minor</em> and <em>patch</em> version
number policy.  E.g. Neubot 0.4.8 has major version number 0, minor
version number 4 and patch version number 8.</p>
<p>A milestone release has patch number 0 and major, minor version numbers
match a milestone in the <a class="reference external" href="https://github.com/neubot/neubot/wiki/roadmap">roadmap</a>.  Patch releases, instead, have nonzero
patch version number.  Therefore, 1.0.0 and 0.4.0 are milestone releases,
while 0.3.1 is a patch release.</p>
</div>
<div class="section" id="what-is-the-best-version-of-neubot">
<h3>1.11. What is the best version of Neubot?</h3>
<p>The best version of Neubot will always be the one with the highest
version number, e.g. 0.3.1 is better than 0.3.0. Patch releases might
include experimental features, but these features will not be enabled by
default until they graduate and become stable.</p>
</div>
<div class="section" id="how-long-should-i-keep-neubot-installed">
<h3>1.12. How long should I keep Neubot installed?</h3>
<p>As long as possible. Neubot is not a limited-scope project but rather an
ongoing effort.</p>
</div>
<div class="section" id="how-much-do-you-test-neubot-before-release">
<h3>1.13. How much do you test Neubot before release?</h3>
<p>Typically a new experimental feature is included in a patch release and
is not enabled by default until it graduates and becomes stable.  When
a milestone release ships, most stable features have been tested for at
least one release cycle, i.e. two to four weeks.</p>
</div>
<div class="section" id="who-develops-neubot">
<h3>1.14. Who develops Neubot?</h3>
<p>Neubot project lead is <a class="reference external" href="http://www.neubot.org/people#basso">Simone Basso</a>, a research fellow of the <a class="reference external" href="http://nexa.polito.it/">NEXA
Center for Internet &amp; Society</a>. He develops Neubot in collaboration with
and under the supervision of prof. <a class="reference external" href="http://www.neubot.org/people#servetti">Antonio Servetti</a>, prof. <a class="reference external" href="http://www.neubot.org/people#morando">Federico
Morando</a>, and prof. <a class="reference external" href="http://www.neubot.org/people#de_martin">Juan Carlos De Martin</a>, of Politecnico di Torino.</p>
<p>See <a class="reference external" href="http://www.neubot.org/people">people page</a> for more information.</p>
</div>
<div class="section" id="under-what-license-is-neubot-available">
<h3>1.15. Under what license is Neubot available?</h3>
<p>We release Neubot under <a class="reference external" href="http://www.neubot.org/copying">GNU General Public License version 3</a>.</p>
</div>
<div class="section" id="how-much-does-neubot-cost">
<h3>1.16. How much does Neubot cost?</h3>
<p>Zero. Neubot is available for free.</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="installing-neubot">
<h2>2. Installing Neubot</h2>
<div class="section" id="on-what-systems-does-neubot-run">
<h3>2.1. On what systems does neubot run?</h3>
<p>Neubot is written in <a class="reference external" href="http://www.python.org/">Python</a> and therefore should run on all systems
supported by Python.</p>
<p>The Neubot team provides packages for <a class="reference external" href="http://www.ubuntu.com/">Ubuntu</a> &gt;= 10.04 (and <a class="reference external" href="http://www.debian.org/">Debian</a>),
<a class="reference external" href="http://www.apple.com/macosx/">MacOSX</a> &gt;= 10.6, <a class="reference external" href="http://windows.microsoft.com/">Windows</a> &gt;= XP SP3.  Neubot is included in the <a class="reference external" href="http://www.freshports.org/net/neubot">FreeBSD
Ports Collection</a> and is known to run on <a class="reference external" href="http://www.openbsd.org/">OpenBSD</a> 5.1 current.</p>
</div>
<div class="section" id="how-do-i-install-neubot">
<h3>2.2. How do I install neubot?</h3>
<p>The Neubot team provides packages for <a class="reference external" href="http://www.apple.com/macosx/">MacOSX</a>, <a class="reference external" href="http://windows.microsoft.com/">Windows</a>, <a class="reference external" href="http://www.debian.org/">Debian</a> and
distributions based on <a class="reference external" href="http://www.debian.org/">Debian</a> (such as <a class="reference external" href="http://www.ubuntu.com/">Ubuntu</a>).  Neubot is part
of the FreeBSD port collection.  If there are no binary packages available
for your system, you can still install it from sources.</p>
<p>Subsequent FAQ entries will deal with all these options.</p>
</div>
<div class="section" id="how-do-i-install-neubot-on-freebsd">
<h3>2.3. How do I install Neubot on FreeBSD?</h3>
<p>Neubot is part of <cite>FreeBSD ports collection</cite>.  So it can be installed
easily, either by using <tt class="docutils literal">pkg_add</tt> or by compiling the package for the
ports tree.  Of course, when in doubt, please refer to <a class="reference external" href="http://www.freebsd.org/docs.html">FreeBSD
documentation</a> and <a class="reference external" href="http://www.freebsd.org/cgi/man.cgi">FreeBSD manpages</a>.  In particular, the authoritative
Neubot port page is:</p>
<pre class="literal-block">
http://www.freshports.org/net/neubot/
</pre>
<p>For your convenience, here we mirror the two base commands to add Neubot
to your FreeBSD system.  To add the precompiled package to your system,
you should run the following command as root:</p>
<pre class="literal-block">
pkg_add -r neubot
</pre>
<p>To compile and install the port, again as root, you need to type the
following command:</p>
<pre class="literal-block">
cd /usr/ports/net/neubot/ &amp;&amp; make install clean
</pre>
<p>Please, do not ask Neubot developers questions related to the FreeBSD
port because they may not be able to help.  We suggest instead to direct
questions to <a class="reference external" href="http://lists.freebsd.org/mailman/listinfo/freebsd-ports">FreeBSD ports mailing list</a>.  Bugs should be reported
using the <a class="reference external" href="http://www.freebsd.org/send-pr.html">send-pr</a> interface.</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="using-neubot">
<h2>3. Using Neubot</h2>
<div class="section" id="neubot-installed-what-should-i-do-now">
<h3>3.1. Neubot installed. What should I do now?</h3>
<p>Neubot automatically downloads and installs updates on all platforms
but Microsoft Windows (and, of course, if you installed it from
source, you will not receive automatic updates).</p>
<p>If you are not using Windows, you should periodically make sure that
it automatically updated to the latest version.  As a rule of thumb, if
more than two weeks have passed since the last release and Neubot has not
updated, there's a bug.</p>
<p>If you are running Windows, the web user interface (see <a class="reference internal" href="#web-user-interface">7. Web user
interface</a>) will be opened
automatically on the browser when an update is available. You will
see a message like the one in the following screenshot. Click on the
link, follow instructions, and you're done.</p>
<img alt="http://www.neubot.org/neubotfiles/neubot-update-notification.png" class="align-center" src="http://www.neubot.org/neubotfiles/neubot-update-notification.png"/>
<p>You may also want to compare Neubot results with the ones of other online
speed tests and tools.  If so, we would appreciate it if you would share
your results with us, especially when Neubot results are not consistent
with the ones of other tools.</p>
</div>
<div class="section" id="how-many-resources-does-neubot-need">
<h3>3.2. How many resources does Neubot need?</h3>
<p>Neubot has a minimal impact on system and network load. It spends most
of its time asleep or waiting for its turn to perform a test. During a
test Neubot consumes a lot of system and network resources but the
program tries to guarantee that the test does not take not too much
time.</p>
<p>Here are a couple of screenshots captured from a netbook running Ubuntu
9.10 and attached to Politecnico di Torino network. In the first
screenshot you can see the resource usage during an on-demand test
invoked from the command line. The <em>init</em> phase of the test is the one
where Neubot generates the random data to send during the upload phase.
(The resource usage is much lower if you run the test at home, given
that Politecnico network is 5x/10x faster than most ADSLs.)</p>
<img alt="http://www.neubot.org/neubotfiles/resources1.png" class="align-center" src="http://www.neubot.org/neubotfiles/resources1.png"/>
<p>The second screenshot shows the amount of consumed resources (in
particular memory) when Neubot is idle.</p>
<img alt="http://www.neubot.org/neubotfiles/resources2.png" class="align-center" src="http://www.neubot.org/neubotfiles/resources2.png"/>
</div>
<div class="section" id="how-do-i-report-bugs-ask-questions-or-make-suggestions">
<h3>3.3. How do I report bugs, ask questions, or make suggestions?</h3>
<p>To report bugs and ask questions, please use our mailing list. The
official languages for the mailing list are English and Italian.</p>
<p>Note that you <strong>must</strong> subscribe to the mailing list first, otherwise
your message <strong>will not</strong> be accepted. To subscribe, go to:</p>
<blockquote>
<a class="reference external" href="http://www.neubot.org/cgi-bin/mailman/listinfo/neubot">http://www.neubot.org/cgi-bin/mailman/listinfo/neubot</a></blockquote>
<p>The mailing list subscription page does not have a valid SSL certificate
and your browser is likely to complain.  Don't be scared; it
is the page to register to the Neubot mailing list, not your bank account.</p>
<p>We advise you to search the public archive <strong>before</strong> posting a message,
because others might have already asked the same question or reported
the same bug. All posts to the mailing list are archived here:</p>
<blockquote>
<a class="reference external" href="http://www.neubot.org/pipermail/neubot/">http://www.neubot.org/pipermail/neubot/</a></blockquote>
<p>Thanks for your cooperation!</p>
</div>
<div class="section" id="what-are-the-issues-if-i-use-mobile-broadband-3g-modem-internet-key">
<h3>3.4. What are the issues if I use mobile broadband, 3G modem, Internet key?</h3>
<p>One possible issue with mobile broadband is the following. If you use
Windows, you installed Neubot, and you are not connected, and Neubot
starts a test, it's possible that Windows asks you to connect. If this
behavior annoys you, stop Neubot from the start menu.</p>
<p><em>In future releases we plan to check whether there is an Internet
connection or not, and start a test only if it's available.</em></p>
</div>
<div class="section" id="do-i-need-to-tweak-the-configuration-of-my-router">
<h3>3.5. Do I need to tweak the configuration of my router?</h3>
<p>No.</p>
</div>
<div class="section" id="how-do-i-read-neubot-logs">
<h3>3.6. How do I read Neubot logs?</h3>
<p>Under all operating systems you can read logs via the <em>Log</em> tab of the
web user interface (see <a class="reference internal" href="#web-user-interface">7. Web user interface</a>), available since
<tt class="docutils literal">0.3.7</tt>.  The following screenshot
provides an example:</p>
<img alt="http://www.neubot.org/neubotfiles/neubot-log.png" class="align-center" src="http://www.neubot.org/neubotfiles/neubot-log.png"/>
<p>In addition, under UNIX Neubot saves logs with <tt class="docutils literal">syslog(3)</tt> and
<tt class="docutils literal">LOG_DAEMON</tt> facility. Logs end up in <tt class="docutils literal">/var/log</tt>, typically in
<tt class="docutils literal">daemon.log</tt>. When unsure, I run the following command (as root) to
lookup the exact file name:</p>
<pre class="literal-block">
# grep neubot /var/log/* | awk -F: '{print $1}' | sort | uniq
/var/log/daemon.log
/var/log/syslog
</pre>
<p>In this example, there are interesting logs in both <tt class="docutils literal">/var/log/daemon.log</tt>
and <tt class="docutils literal">/var/log/syslog</tt>. Once I know the file names, I can grep the logs
out of each file, as follows:</p>
<pre class="literal-block">
# grep neubot /var/log/daemon.log | less
</pre>
</div>
<div class="section" id="do-i-have-to-periodically-rotate-log-files">
<h3>3.7. Do I have to periodically rotate log files?</h3>
<p>No.  Logs are always saved in the database, but Neubot will periodically
prune old logs.  On UNIX logs are also saved using <tt class="docutils literal">syslog(3)</tt>, which
should automatically rotate them.</p>
</div>
<div class="section" id="do-i-have-to-periodically-rotate-the-database">
<h3>3.8. Do I have to periodically rotate the database?</h3>
<p>Yes. Neubot database should grow slowly in space over time. (My
workstation database weighs 2 MBytes after 8 months, and I frequently
run a test every 30 seconds for testing purpose.) To prune the database
run the following command (as root):</p>
<pre class="literal-block">
# neubot database prune
</pre>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="technical-questions">
<h2>4. Technical questions</h2>
<div class="section" id="how-does-neubot-work">
<h3>4.1. How does Neubot work?</h3>
<p>Neubot runs in background. Under Linux, BSD, and other Unices Neubot is
started at boot time, becomes a daemon and drops root privileges. Under
Windows Neubot is started when the user logs in for the first time
(subsequent logins don't start additional instances of Neubot).</p>
<p>Neubot has a minimal impact on system and network load. It spends most
of its time asleep or waiting for its turn to perform a test. During a
test Neubot consumes a lot of system and network resources but the
program tries to guarantee that the test does not take too much
time, as detailed below.</p>
<p>Periodically, Neubot downloads form the <em>Master Server</em> information about
the next test it should perform, including the name of the test, the
Test Server to connect to, and possibly other parameters. If there are
updates available, the Master Server response includes update
information too, like the URI to download updates from.</p>
<p>Then, Neubot connects to the Test Server, waits the authorization to
perform the selected test, performs the test, and saves results. It
needs to wait (possibly for quite a long time) because Test Servers do
not handle more than one (or few) test at a time. Overall, the test may
last for a number of seconds but the program tries to guarantee that the
test does not take too much time, as detailed below. At the end of the
test, results are saved in a local database and sent to the project
servers.</p>
<p>Finally, after the test, Neubot sleeps for a long time, before
connecting again to the Master Server.</p>
<p>As of version 0.4.2, Neubot uses the following algorithm to keep the test
duration bounded. The default amount of bytes to transfer is designed to
allow for reasonable testing time with slow ADSL connections. After the
test, Neubot adapts the number of bytes to be transferred for the next test
so that the next test will take about five seconds, regardless of connection
speed. Also, it repeats the test up to seven times if the test
did not take at least three seconds.</p>
<p><em>(Future versions of Neubot will implement peer-to-peer tests within instances of Neubot.)</em></p>
</div>
<div class="section" id="what-does-speedtest-test-measure">
<h3>4.2. What does <em>speedtest</em> test measure?</h3>
<p>The <em>speedtest</em> test uses the <a class="reference external" href="http://en.wikipedia.org/wiki/HTTP">HTTP protocol</a> and measures: <a class="reference external" href="http://en.wikipedia.org/wiki/Round-trip_delay_time">round trip
time</a>, download and upload <a class="reference external" href="http://en.wikipedia.org/wiki/Goodput">goodput</a>. It was originally inspired to
<a class="reference external" href="http://www.speedtest.net">speedtest.net</a> test, hence the name. The test estimates the <a class="reference external" href="http://en.wikipedia.org/wiki/Round-trip_delay_time">round trip
time</a> measuring the time required to connect and the average time to
request and receive a zero-length resource. It also estimates the download
and upload <a class="reference external" href="http://en.wikipedia.org/wiki/Goodput">goodput</a> dividing the number of bytes transferred by the time
required to transfer them.</p>
</div>
<div class="section" id="how-does-neubot-change-my-windows-registry">
<h3>4.3. How does Neubot change my Windows registry?</h3>
<p>The installer writes the following two registry keys:</p>
<pre class="literal-block">
HKCU &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\neubot&quot;
HKCU &quot;Software\Microsoft\Windows\CurrentVersion\Run&quot; &quot;Neubot&quot;
</pre>
<p>The former makes Windows aware of the uninstaller program, while
the latter starts Neubot when you log in.</p>
<p>Both keys are removed by the uninstall process.</p>
</div>
<div class="section" id="what-is-the-path-of-neubot-database">
<h3>4.4. What is the path of Neubot database?</h3>
<p>Under Linux the database path is <tt class="docutils literal">/var/lib/neubot/database.sqlite3</tt>,
while on other UNIX systems it is <tt class="docutils literal">/var/neubot/database.sqlite3</tt>.</p>
<p>Under Windows, the database path is always
<tt class="docutils literal"><span class="pre">%APPDATA%\neubot\database.sqlite3</span></tt>.</p>
<p>For Neubot &gt;= 0.3.7 you can query the location of the database running
the <tt class="docutils literal">neubot database info</tt> command, for example:</p>
<pre class="literal-block">
$ neubot database info
/home/simone/.neubot/database.sqlite3

# neubot database info
/var/lib/neubot/database.sqlite3
</pre>
<p>Until Neubot 0.4.12, when Neubot was run by an ordinary user, the
database was searched on <tt class="docutils literal"><span class="pre">$HOME/.neubot/database.sqlite</span></tt>, but
this is not supported anymore.</p>
</div>
<div class="section" id="how-can-i-dump-the-content-of-the-database">
<h3>4.5. How can I dump the content of the database?</h3>
<p>You can dump the content of the database using the command
<tt class="docutils literal">neubot database dump</tt>. The output is a JSON file that contains the
results. (Note that under UNIX, you must be root in order to dump the
content of the system-wide database: If you run this command as an
ordinary user you will dump the user-specific database instead.)</p>
</div>
<div class="section" id="what-does-bittorrent-test-measure">
<h3>4.6. What does <em>bittorrent</em> test measure?</h3>
<p>The <em>bittorrent</em> test emulates the <a class="reference external" href="http://www.bittorrent.org/beps/bep_0003.html">BitTorrent peer-wire protocol</a> and
measures: <a class="reference external" href="http://en.wikipedia.org/wiki/Round-trip_delay_time">round trip time</a>, download and upload <a class="reference external" href="http://en.wikipedia.org/wiki/Goodput">goodput</a>. The test
estimates the <a class="reference external" href="http://en.wikipedia.org/wiki/Round-trip_delay_time">round trip time</a> by measuring the time required to connect.</p>
<p>Since BitTorrent uses small messages, it is not possible to transfer a
huge resource and divide the number of transmitted bytes by the time of
the transfer. So, the test initially makes many back to back requests to
fill the space between the client and the server of many flying
responses. The measurement starts only when the requester thinks there
are enough responses in flight to approximate a continuous transfer.</p>
</div>
<div class="section" id="what-does-measuring-goodput-mean">
<h3>4.7. What does measuring goodput mean?</h3>
<p>Neubot tests <em>does not</em> measure the speed of your broadband Internet
connection, but rather the <a class="reference external" href="http://en.wikipedia.org/wiki/Goodput">goodput</a>, i.e. <em>the application-level
achievable speed in the moment of the measurement</em>. The result will
suffer if, for example:</p>
<ol class="arabic simple">
<li>you are downloading a large file;</li>
<li>your roommate is downloading a large file;</li>
<li>you have a bad wireless connection with high packet loss ratio;</li>
<li>there is congestion outside your provider network;</li>
<li>you don't live <a class="reference external" href="http://en.wikipedia.org/wiki/TCP_tuning#Window_size">near our server</a>;</li>
<li>our server is overloaded.</li>
</ol>
<p>I.e. you must take Neubot results <a class="reference external" href="http://en.wikipedia.org/wiki/Grain_of_salt">with a grain of salt</a>.</p>
</div>
<div class="section" id="is-it-possible-to-compare-speedtest-and-bittorrent-results">
<h3>4.8. Is it possible to compare speedtest and bittorrent results?</h3>
<p>The bittorrent test was released in 0.4.0. At that time the comparison
was not always possible because the speedtest test used two connections
while the bittorrent one used only one, resulting in worse performance
with high-speed, high-delay and/or more congested networks. Neubot 0.4.2
fixed this issue and modified speedtest to use just one connection.</p>
<p>This is not enough.  Before Neubot 0.5.0 more work must be done to make the
behavior of the two tests much more similar, allowing for a fair comparison
of them.</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="privacy-questions">
<h2>5. Privacy questions</h2>
<div class="section" id="what-personal-data-does-neubot-collect">
<h3>5.1. What personal data does Neubot collect?</h3>
<p>Neubot does not inspect your traffic, does not monitor the sites you
have visited, etc. Neubot use a fraction of your network capacity
to run periodic transmission tests and these tests use either random data
or data from our servers.</p>
<p>Neubot collects the Internet address of the computer where it is
running. We have to collect your Internet address (which is personal
data) because it tells us your Internet Service Provider and (roughly)
your location. Both information are imperative to our goal of monitoring
network neutrality.</p>
<p>We identify each instance of Neubot with a random unique identifier. We
use this identifier to perform time series analysis and to check whether
there are recurrent trends. We believe this identifier does not breach
your privacy: in the worst worst case, we would to able to say that a
given Neubot instance has changed Internet address (and hence Provider
and/or location). However, if you are concerned and you are running
Neubot &gt;= 0.3.7, you can generate a new unique identifier running the
following command:</p>
<pre class="literal-block">
# neubot database regen_uuid
</pre>
<p>Future versions of Neubot will also monitor and collect information
regarding your computer load (such as the amount of free memory, the
average load, the average network usage). We will monitor the load to
avoid starting tests when you are using your computer heavily. We will
collect load data in order to consider the effect of the load on
results.</p>
</div>
<div class="section" id="will-you-publish-my-ip-address">
<h3>5.2. Will you publish my IP address?</h3>
<p>Yes.  Neubot wants to publish your Internet addresss to enable other
individuals and institutions to carry alternative studies and/or peer
review its measurements and data analysis methodology.</p>
<p>Of course, Neubot cannot publish your Internet address without your
prior informed consent, in compliance with European privacy laws.
For this reason, it asks for permission during the installation,
if applicable, or during operation.  It goes without saying that it
will not start any test until you have read the privacy policy and
provided the permission to publish your Internet address.</p>
<p>One more reason why Neubot cannot run any test until you provide
the permission to publish your Internet address is that Measurement Lab (<a class="reference external" href="http://www.measurementlab.net/about">M-Lab</a>),
the distributed server platform that empowers the Neubot Project, requires
all results to be released as open data.</p>
<p>For more information, please refer to the <a class="reference external" href="https://github.com/neubot/neubot/blob/master/PRIVACY">privacy policy</a>.</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="data-questions">
<h2>6. Data questions</h2>
<div class="section" id="where-is-data-published">
<h3>6.1. Where is data published?</h3>
<p>Data is automatically harvested and published by Measurement Lab, as
explained here:</p>
<blockquote>
<a class="reference external" href="http://measurementlab.net/data">http://measurementlab.net/data</a></blockquote>
<p>The direct link to access Neubot data is:</p>
<blockquote>
<a class="reference external" href="https://sandbox.google.com/storage/m-lab/neubot">https://sandbox.google.com/storage/m-lab/neubot</a></blockquote>
<p>The Neubot project publishes old data (collected before being accepted
into Measurement Lab) and mirrors recent results collected by Measurement
Lab at:</p>
<blockquote>
<a class="reference external" href="http://neubot.org/data">http://neubot.org/data</a></blockquote>
</div>
<div class="section" id="is-there-any-license-attached-to-data">
<h3>6.2. Is there any license attached to data?</h3>
<p>Neubot data is available under the terms and provisions of Creative
Commons Zero license:</p>
<blockquote>
<a class="reference external" href="http://data.neubot.org/mlab_mirror/LICENSE">http://data.neubot.org/mlab_mirror/LICENSE</a></blockquote>
</div>
<div class="section" id="what-is-data-format">
<h3>6.3. What is data format?</h3>
<p>Data is published in compressed tarballs, where each tarballs contains
all the results collected during a day by a test server.  Each result
is a text file that contains JSON-encoded dictionary, which is described
here:</p>
<blockquote>
<a class="reference external" href="http://data.neubot.org/mlab_mirror/README">http://data.neubot.org/mlab_mirror/README</a></blockquote>
<p>Data published before the 27th January 2011 is published in different
format:</p>
<blockquote>
<a class="reference external" href="http://data.neubot.org/master.neubot.org/odata/README">http://data.neubot.org/master.neubot.org/odata/README</a></blockquote>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="web-user-interface">
<h2>7. Web user interface</h2>
<div class="section" id="what-is-the-web-user-interface">
<h3>7.1. What is the web user interface?</h3>
<p>The web user interface is a web-based interface that allows the user to
control <strong>neubot</strong> and shows recent results.  By default, when
<strong>neubot</strong> is started, it binds port <tt class="docutils literal">9774</tt> on <tt class="docutils literal">127.0.0.1</tt>
and waits for web requests.</p>
<p>Users can request raw information, using a <tt class="docutils literal">JSON</tt> API, or regular
web pages.  If no page or API is specified, <strong>neubot</strong> will return
the content of the <em>status</em> page.  In turn, this page will
use <tt class="docutils literal">javascript</tt> to query the <tt class="docutils literal">JSON</tt> API and populate the page
itself.  Similarly, other web pages use <tt class="docutils literal">javascript</tt> and the
<tt class="docutils literal">JSON</tt> API to fill themselves with dynamic data, e.g. settings,
recent results, logs.</p>
</div>
<div class="section" id="how-do-i-open-the-web-user-interface">
<h3>7.2. How do I open the web user interface?</h3>
<p>On <strong>Windows</strong>, the <em>Neubot</em> command on the start menu should open
the web user interface in the default browser.</p>
<p>On <strong>MacOSX</strong>, the <em>Neubot</em> application (<tt class="docutils literal">/Applications/Neubot.app</tt>)
should open the web user interface in the default browser.</p>
<p>On <strong>Ubuntu and Debian</strong>, if the user has installed the <cite>neubot</cite>
package (and not the <cite>neubot-nox</cite> package), the <em>Neubot</em> command
on the applications menu should open the web user interface in
a custom <tt class="docutils literal">Gtk+</tt> application that embeds <tt class="docutils literal">WebKit</tt> and uses it
to show the web user interface.</p>
<p>On <strong>UNIX</strong>, if <cite>Gtk+</cite> and <cite>WebKit</cite> bindings for Python are installed,
the following command:</p>
<pre class="literal-block">
neubot viewer
</pre>
<p>opens a custom <tt class="docutils literal">Gtk+</tt> application that embeds <tt class="docutils literal">WebKit</tt> and uses
it to show the web user interface.</p>
<p>On <strong>any platform</strong>, of course, the user can open his or her favorite web
browser and point it to the following URI:</p>
<pre class="literal-block">
http://127.0.0.1:9774/
</pre>
</div>
<div class="section" id="what-does-the-status-page-show">
<h3>7.3. What does the status page show?</h3>
<p>The <em>status</em> page (which is the default one) shows the status of Neubot,
and the result of the latest transmission test.</p>
<img alt="http://www.neubot.org/neubotfiles/faq-wui-status.png" class="align-center" src="http://www.neubot.org/neubotfiles/faq-wui-status.png"/>
</div>
<div class="section" id="what-does-the-speedtest-page-show">
<h3>7.4. What does the speedtest page show?</h3>
<p>The <em>speedtest</em> page shows the results of recent <em>speedtest</em> tests, i.e.
latency, download and upload goodput, both in graphical and in tabular
form.</p>
<img alt="http://www.neubot.org/neubotfiles/faq-wui-speedtest.png" class="align-center" src="http://www.neubot.org/neubotfiles/faq-wui-speedtest.png"/>
</div>
<div class="section" id="what-does-the-bittorrent-page-show">
<h3>7.5. What does the bittorrent page show?</h3>
<p>The <em>bittorrent</em> page shows the results of recent <em>bittorrent</em> tests, i.e.
latency, download and upload goodput, both in graphical and in tabular
form.</p>
<img alt="http://www.neubot.org/neubotfiles/faq-wui-bittorrent.png" class="align-center" src="http://www.neubot.org/neubotfiles/faq-wui-bittorrent.png"/>
</div>
<div class="section" id="what-does-the-log-page-show">
<h3>7.6. What does the log page show?</h3>
<p>The <em>log</em> page shows recent logs.  The color of each log entry reflects
severity.  In particular, the page uses:</p>
<ul class="simple">
<li><em>red</em> for error messages;</li>
<li><em>yellow</em> for warning messages;</li>
<li><em>blue</em> for notice messages;</li>
<li><em>grey</em> for debug messages.</li>
</ul>
<p>One can refresh the page by clicking on the <cite>Refresh page</cite> link.</p>
<img alt="http://www.neubot.org/neubotfiles/faq-wui-log.png" class="align-center" src="http://www.neubot.org/neubotfiles/faq-wui-log.png"/>
</div>
<div class="section" id="what-does-the-privacy-page-show">
<h3>7.7. What does the privacy page show?</h3>
<p>The <em>privacy</em> page shows the privacy policy and allows to set privacy
permissions.  See <a class="reference internal" href="#privacy-questions">5. Privacy questions</a> section for more info.</p>
<img alt="http://www.neubot.org/neubotfiles/faq-wui-privacy.png" class="align-center" src="http://www.neubot.org/neubotfiles/faq-wui-privacy.png"/>
</div>
<div class="section" id="what-does-the-settings-page-show">
<h3>7.8. What does the settings page show?</h3>
<p>The <em>settings</em> page shows and allow to change Neubot settings.  One must
click on the <cite>Save</cite> button to make changes effective.</p>
<img alt="http://www.neubot.org/neubotfiles/faq-wui-settings.png" class="align-center" src="http://www.neubot.org/neubotfiles/faq-wui-settings.png"/>
</div>
<div class="section" id="how-do-i-change-the-web-user-interface-language">
<h3>7.9. How do I change the web user interface language?</h3>
<p>Change the value of the <tt class="docutils literal">www.lang</tt> setting, which can be modified
using the <em>settings</em> page.  Currently the value can be one of:</p>
<dl class="docutils">
<dt><strong>default</strong></dt>
<dd>Uses the browser's default language.</dd>
<dt><strong>en</strong></dt>
<dd>Uses english.</dd>
<dt><strong>it</strong></dt>
<dd>Uses italian.</dd>
</dl>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="following-development">
<h2>8. Following development</h2>
<div class="section" id="how-do-i-clone-neubot-repository">
<h3>8.1. How do I clone Neubot repository?</h3>
<p>Install git and clone the git repository with the following command:</p>
<pre class="literal-block">
git clone git://github.com/neubot/neubot.git
</pre>
<p>It contains the <cite>master branch</cite>, which holds the code that will be
included in next release.  There may be other branches, but
they are intended for internal development only.  So, they can be
deleted or rebased without notice.</p>
<p>Specific repositories are available for ports on supported operating
systems:</p>
<pre class="literal-block">
git clone git://github.com/neubot/neubot_debian.git
git clone git://github.com/neubot/neubot_macos.git
git clone git://github.com/neubot/neubot_win32.git
</pre>
<p>Each contains a <cite>master</cite> branch, which holds the code and patches
that will be included in next release.</p>
</div>
<div class="section" id="how-do-i-prepare-a-diff-for-neubot">
<h3>8.2. How do I prepare a diff for Neubot?</h3>
<p>Assuming you already cloned Neubot's git repository, the first step is to
sync your local copy with it:</p>
<pre class="literal-block">
git fetch origin
git checkout master
git merge origin/master
</pre>
<p>The second step is to create a branch for your patches.  It is a good idea
to tag your starting point:</p>
<pre class="literal-block">
git checkout -b feature_123
git tag feature_123_start
</pre>
<p>The third step is to develop your patches.  Make sure that each patch
implements one single change and the rationale of the change is well
documented by the commit message.</p>
<p>When you think your patches are ready, subscribe to the public mailing
list, if needed, and send your patches with <cite>git send-email</cite>:</p>
<pre class="literal-block">
git format-patch feature_123_start
git send-email *.patch
</pre>
<p>Patches may be rejected or accepted, possibly with the indication of
performing additional changes.  Accepted patches are committed on some
testing branch of Neubot repository.  When we think that they are
stable enough to be included into a release, they are committed on
the master branch.</p>
<p>At this point, they are part of the official history of the project
and you can cleanup your work environment:</p>
<pre class="literal-block">
git checkout master
git branch -D feature_123
git tag -d feature_123_start
</pre>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="localhost-web-api">
<h2>9. Localhost web API</h2>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">doc/FAQ.rst</tt>, line 936)</p>
<p>Unknown directive type &quot;TODO&quot;.</p>
<pre class="literal-block">
.. TODO:: rewrite to be impersonal

</pre>
</div>
<p>Here is the documentation of Neubot 127.0.0.1:9774
web API.  This wiki describes roughly 3/5 of the API.
I will follow-up with the remainder soon.</p>
<p>The API is quite liberal and in most cases any method,
will do.  When the behavior depends on the method I
have specified that.  Of course, I usually use the GET
method to test the API from command line.</p>
<div class="section" id="how-do-i-get-a-a-list-of-apis">
<h3>9.1. How do I get a a list of APIs?</h3>
<p>The first API you can access is, indeed, /api/ and
returns just the list of APIs.  I originally planned
to return documentation here, but I never went that
further.  Still, I mention that possibility, because
it may be a nice thing to do in the interest of
discoverability.</p>
<p>Anyway here's the API in action:</p>
<pre class="literal-block">
$ curl -o- http://127.0.0.1:9774/api/
[
  &quot;/api&quot;,
  &quot;/api/&quot;,
  &quot;/api/results&quot;,
  &quot;/api/config&quot;,
  &quot;/api/debug&quot;,
  &quot;/api/exit&quot;,
  &quot;/api/index&quot;,
  &quot;/api/log&quot;,
  &quot;/api/runner&quot;,
  &quot;/api/state&quot;,
  &quot;/api/version&quot;
]
</pre>
<p>Needless to say, the response is JSON.</p>
<p>Oh, and of course, /api is just an alias for /api/.</p>
</div>
<div class="section" id="how-do-i-get-test-data">
<h3>9.2. How do I get test data?</h3>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">This API will be renamed /api/data
starting from Neubot 0.4.13</p>
</div>
<p>We have a common API, /api/results, for both BitTorrent
and speedtest.</p>
<p>I will describe /api/results taking BitTorrent as an example
but the same apply to speedtest. Both return a list of
dictionaries, what differs is that speedtest dictionaries
have one more (key, value) pair (with key='latency').</p>
<p>Calling /api/results?test=bittorrent without any further
option returns a list of BitTorrent results (just use
test=speedtest for speedtest results), where each result
is a dictionary:</p>
<pre class="literal-block">
$ curl -o- http://127.0.0.1:9774/api/results?test=bittorrent
[{&quot;real_address&quot;: &quot;80.182.50.210&quot;, &quot;privacy_can_collect&quot;: 1, ...}, {...}]
</pre>
<p>The response is a very long line, here I have edited
it for readability.  (Below there is a pretty-printed
example, with all the dict keys.)</p>
<p>Apart from <cite>test=name</cite>, the other available options are:</p>
<dl class="docutils">
<dt>since=int</dt>
<dd>Returns only results after the specified date,
which is relative to the EPOCH.</dd>
<dt>until=int</dt>
<dd>Does not return results after the specified date,
which is relative to the EPOCH.</dd>
<dt>debug=bool</dt>
<dd>Pretty prints the JSON.</dd>
</dl>
<p>One comment: when I wrote the interface I didn't know,
but IIRC here it would be more correct english to use
from..to instead of since..until.</p>
<p>Here's an example with some options:</p>
<pre class="literal-block">
$ curl -o- 'http://127.0.0.1:9774/api/results?test=bittorrent&amp;debug=1&amp;since=1332738000'
[
  {
      &quot;connect_time&quot;: 0.034081935882568359,
      &quot;download_speed&quot;: 862063.72062096791,
      &quot;internal_address&quot;: &quot;192.168.0.33&quot;,
      &quot;neubot_version&quot;: &quot;0.004010999&quot;,
      &quot;platform&quot;: &quot;darwin&quot;,
      &quot;privacy_can_collect&quot;: 1,
      &quot;privacy_can_publish&quot;: 1,
      &quot;privacy_informed&quot;: 1,
      &quot;real_address&quot;: &quot;87.14.214.244&quot;,
      &quot;remote_address&quot;: &quot;194.116.85.224&quot;,
      &quot;timestamp&quot;: 1332867719,
      &quot;upload_speed&quot;: 49437.521614604324,
      &quot;uuid&quot;: &quot;0964312e-f451-4579-9984-3954dcfdeb42&quot;
  },
  {
      &quot;connect_time&quot;: 0.035229921340942383,
      &quot;download_speed&quot;: 861644.9323690217,
      &quot;internal_address&quot;: &quot;192.168.0.33&quot;,
      &quot;neubot_version&quot;: &quot;0.004010999&quot;,
      &quot;platform&quot;: &quot;darwin&quot;,
      &quot;privacy_can_collect&quot;: 1,
      &quot;privacy_can_publish&quot;: 1,
      &quot;privacy_informed&quot;: 1,
      &quot;real_address&quot;: &quot;87.14.214.244&quot;,
      &quot;remote_address&quot;: &quot;194.116.85.211&quot;,
      &quot;timestamp&quot;: 1332841328,
      &quot;upload_speed&quot;: 48351.377174934867,
      &quot;uuid&quot;: &quot;0964312e-f451-4579-9984-3954dcfdeb42&quot;
  },
  {
      &quot;connect_time&quot;: 0.03593897819519043,
      &quot;download_speed&quot;: 861803.16141179914,
      &quot;internal_address&quot;: &quot;192.168.0.33&quot;,
      &quot;neubot_version&quot;: &quot;0.004010999&quot;,
      &quot;platform&quot;: &quot;darwin&quot;,
      &quot;privacy_can_collect&quot;: 1,
      &quot;privacy_can_publish&quot;: 1,
      &quot;privacy_informed&quot;: 1,
      &quot;real_address&quot;: &quot;87.14.214.244&quot;,
      &quot;remote_address&quot;: &quot;194.116.85.224&quot;,
      &quot;timestamp&quot;: 1332838263,
      &quot;upload_speed&quot;: 46651.459334347594,
      &quot;uuid&quot;: &quot;0964312e-f451-4579-9984-3954dcfdeb42&quot;
  },
  {
      &quot;connect_time&quot;: 0.036273956298828125,
      &quot;download_speed&quot;: 841047.23338805605,
      &quot;internal_address&quot;: &quot;192.168.0.33&quot;,
      &quot;neubot_version&quot;: &quot;0.004010999&quot;,
      &quot;platform&quot;: &quot;darwin&quot;,
      &quot;privacy_can_collect&quot;: 1,
      &quot;privacy_can_publish&quot;: 1,
      &quot;privacy_informed&quot;: 1,
      &quot;real_address&quot;: &quot;87.14.214.244&quot;,
      &quot;remote_address&quot;: &quot;194.116.85.237&quot;,
      &quot;timestamp&quot;: 1332805450,
      &quot;upload_speed&quot;: 44710.82837997895,
      &quot;uuid&quot;: &quot;0964312e-f451-4579-9984-3954dcfdeb42&quot;
  }
]
</pre>
<p>The difference between bittorrent and speedtest is
just that the speedtest dictionary has one more (key,
value) pair.  More generally, defines the format of its
own dictionary -- and the javascript on the web api
side is expected to be able to cope with it.</p>
</div>
<div class="section" id="how-do-i-get-set-configuration-variables">
<h3>9.3. How do I get/set configuration variables?</h3>
<p>To get/set configuration variable Neubot uses the
/api/config API.  More specifically:</p>
<ol class="arabic simple">
<li>the configuration is a dictionary;</li>
<li>GET is used to read and POST to modify it.</li>
</ol>
<p>GET returns a JSON object, while POST sends an
urlencoded string.</p>
<p>Available options are:</p>
<dl class="docutils">
<dt>debug=boolean</dt>
<dd>Pretty prints the JSON.</dd>
<dt>labels=boolean</dt>
<dd>When True, the API does not return variable
values but rather their description.</dd>
</dl>
<p>In the following examples I will always use
the debug option, so I don't need to wrap text
at hand anymore :-).</p>
<pre class="literal-block">
$ curl -o- 'http://127.0.0.1:9774/api/config?debug=1'
{
  &quot;agent.api&quot;: 1,
  &quot;agent.api.address&quot;: &quot;127.0.0.1&quot;,
  &quot;agent.api.port&quot;: 9774,
  &quot;agent.daemonize&quot;: 0,
  &quot;agent.interval&quot;: 0,
  &quot;agent.master&quot;: &quot;master.neubot.org&quot;,
  &quot;agent.rendezvous&quot;: 1,
  &quot;agent.use_syslog&quot;: 1,
  &quot;bittorrent.address&quot;: &quot;&quot;,
  &quot;bittorrent.bytes.down&quot;: 0,
  &quot;bittorrent.bytes.up&quot;: 0,
  &quot;bittorrent.daemonize&quot;: 0,
  &quot;bittorrent.infohash&quot;: &quot;&quot;,
  &quot;bittorrent.listen&quot;: 0,
  &quot;bittorrent.my_id&quot;: &quot;&quot;,
  &quot;bittorrent.negotiate&quot;: 1,
  &quot;bittorrent.negotiate.port&quot;: 80,
  &quot;bittorrent.numpieces&quot;: 1048576,
  &quot;bittorrent.piece_len&quot;: 131072,
  &quot;bittorrent.port&quot;: 6881,
  &quot;bittorrent.watchdog&quot;: 300,
  &quot;enabled&quot;: 1,
  &quot;http.client.class&quot;: &quot;&quot;,
  &quot;http.client.method&quot;: &quot;GET&quot;,
  &quot;http.client.stdout&quot;: 0,
  &quot;http.client.uri&quot;: &quot;&quot;,
  &quot;http.server.address&quot;: &quot;0.0.0.0&quot;,
  &quot;http.server.class&quot;: &quot;&quot;,
  &quot;http.server.daemonize&quot;: 1,
  &quot;http.server.mime&quot;: 1,
  &quot;http.server.ports&quot;: &quot;8080,&quot;,
  &quot;http.server.rootdir&quot;: &quot;&quot;,
  &quot;http.server.ssi&quot;: 0,
  &quot;negotiate.max_thresh&quot;: 64,
  &quot;negotiate.min_thresh&quot;: 32,
  &quot;negotiate.parallelism&quot;: 7,
  &quot;net.stream.address&quot;: &quot;127.0.0.1&quot;,
  &quot;net.stream.certfile&quot;: &quot;&quot;,
  &quot;net.stream.chunk&quot;: 262144,
  &quot;net.stream.clients&quot;: 1,
  &quot;net.stream.daemonize&quot;: 0,
  &quot;net.stream.duration&quot;: 10,
  &quot;net.stream.ipv6&quot;: 0,
  &quot;net.stream.key&quot;: &quot;&quot;,
  &quot;net.stream.listen&quot;: 0,
  &quot;net.stream.port&quot;: 12345,
  &quot;net.stream.proto&quot;: &quot;&quot;,
  &quot;net.stream.rcvbuf&quot;: 0,
  &quot;net.stream.secure&quot;: 0,
  &quot;net.stream.server_side&quot;: 0,
  &quot;net.stream.sndbuf&quot;: 0,
  &quot;notifier_browser.honor_enabled&quot;: 0,
  &quot;notifier_browser.min_interval&quot;: 86400,
  &quot;privacy.can_collect&quot;: 1,
  &quot;privacy.can_publish&quot;: 1,
  &quot;privacy.informed&quot;: 1,
  &quot;runner.enabled&quot;: 1,
  &quot;speedtest.client.latency_tries&quot;: 10,
  &quot;speedtest.client.nconn&quot;: 1,
  &quot;speedtest.client.uri&quot;: &quot;http://master.neubot.org/&quot;,
  &quot;uuid&quot;: &quot;0964312e-f451-4579-9984-3954dcfdeb42&quot;,
  &quot;version&quot;: &quot;4.2&quot;,
  &quot;www.lang&quot;: &quot;default&quot;
}

$ curl -o- 'http://127.0.0.1:9774/api/config?debug=1&amp;labels=1'
{
  &quot;agent.api&quot;: &quot;Enable API server&quot;,
  &quot;agent.api.address&quot;: &quot;Set API server address&quot;,
  &quot;agent.api.port&quot;: &quot;Set API server port&quot;,
  &quot;agent.daemonize&quot;: &quot;Enable daemon behavior&quot;,
  &quot;agent.interval&quot;: &quot;Set rendezvous interval, in seconds (must be &gt;= 1380 or 0 = random value in a given interval)&quot;,
  &quot;agent.master&quot;: &quot;Set master server address&quot;,
  &quot;agent.rendezvous&quot;: &quot;Enable rendezvous client&quot;,
  &quot;agent.use_syslog&quot;: &quot;Force syslog usage in any case&quot;,
  &quot;enabled&quot;: &quot;Enable Neubot to perform automatic transmission tests&quot;,
  &quot;notifier_browser.honor_enabled&quot;: &quot;Set to 1 to suppress notifications when Neubot is disabled&quot;,
  &quot;notifier_browser.min_interval&quot;: &quot;Minimum interval between each browser notification&quot;,
  &quot;privacy.can_collect&quot;: &quot;You give Neubot the permission to collect your Internet address for research purposes&quot;,
  &quot;privacy.can_publish&quot;: &quot;You give Neubot the permission to publish on the web your Internet address so that it can be reused for research purposes&quot;,
  &quot;privacy.informed&quot;: &quot;You assert that you have read and understood the privacy policy&quot;,
  &quot;runner.enabled&quot;: &quot;When true command line tests are executed in the context of the local daemon, provided that it is running&quot;,
  &quot;uuid&quot;: &quot;Random unique identifier of this Neubot agent&quot;,
  &quot;version&quot;: &quot;Version number of the Neubot database schema&quot;,
  &quot;www.lang&quot;: &quot;Web GUI language (`default' means: use browser default)&quot;
}

# Now I change the default language for the
# web user interface

$ curl -s -o- 'http://127.0.0.1:9774/api/config?debug=1'|grep 'www\.lang'
  &quot;www.lang&quot;: &quot;default&quot;
$ curl -s -d www.lang=it -o- 'http://127.0.0.1:9774/api/config?debug=1'
&quot;{}&quot;
$ curl -s -o- 'http://127.0.0.1:9774/api/config?debug=1'|grep 'www\.lang'
  &quot;www.lang&quot;: &quot;it&quot;
</pre>
</div>
<div class="section" id="how-do-i-start-a-test">
<h3>9.4. How do I start a test?</h3>
<p>This feature is implemented by the /api/runner API,
which accepts the following options:</p>
<dl class="docutils">
<dt>test=string</dt>
<dd>This is the name of the test to start.  If there is no
name, this operation is basically a no-operation.</dd>
<dt>streaming=boolean</dt>
<dd>When this is True, Neubot will write a copy of the logs
generated by the test on the network socket, so that one
can run a test from command line in the context of the
server and see the logs on console.</dd>
</dl>
<p>Unless streaming is True, this API returns an empty
dictionary to keep jquery happy.</p>
<p>Currently, there is no feedback when there is no test
name, the test name is not known, or the test is known.
This is quite confusing and probably an error should
be returned in the first two cases:</p>
<pre class="literal-block">
$ curl -s -o- 'http://127.0.0.1:9774/api/runner'
{}
$ curl -s -o- 'http://127.0.0.1:9774/api/runner?test=foo'
{}
$ curl -s -o- 'http://127.0.0.1:9774/api/runner?test=speedtest'
{}
</pre>
<p>At this point a test is in progress and trying to run
another test will cause an error:</p>
<pre class="literal-block">
$ curl -v -o- 'http://127.0.0.1:9774/api/runner?test=speedtest'
* About to connect() to 127.0.0.1 port 9774 (#0)
*   Trying 127.0.0.1... connected
* Connected to 127.0.0.1 (127.0.0.1) port 9774 (#0)
&gt; GET /api/runner?test=speedtest HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8r zlib/1.2.3
&gt; Host: 127.0.0.1:9774
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 500 A test is already in progress, try again later
&lt; Date: Tue, 27 Mar 2012 17:45:23 GMT
&lt; Content-Length: 46
&lt; Cache-Control: no-cache
&lt;
* Connection #0 to host 127.0.0.1 left intact
* Closing connection #0
A test is already in progress, try again later$
</pre>
<p>Finally, this demonstrates the streaming feature.  Note
that all logs are passed thru, and it's up to the client
to filter out e.g. DEBUG logs:</p>
<pre class="literal-block">
$ curl -s -o- 'http://127.0.0.1:9774/api/runner?test=speedtest&amp;streaming=1'
DEBUG state: test_latency ---
DEBUG state: test_download ---
DEBUG state: test_upload ---
DEBUG state: test_name speedtest
DEBUG * publish: statechange
INFO * speedtest with http://neubot.mlab.mlab3.trn01.measurement-lab.org:9773/speedtest
DEBUG * Connecting to (u'neubot.mlab.mlab3.trn01.measurement-lab.org', 9773) ...
DEBUG ClientHTTP: latency: 36.5 ms
DEBUG * Connection made (('192.168.0.33', 50192), ('194.116.85.237', 9773))
DEBUG state: negotiate {}
DEBUG * publish: statechange
INFO * speedtest: negotiate in progress...
DEBUG &gt; GET /speedtest/negotiate HTTP/1.1
DEBUG &gt; Content-Length: 0
DEBUG &gt; Host: neubot.mlab.mlab3.trn01.measurement-lab.org:9773
DEBUG &gt; Pragma: no-cache
DEBUG &gt; Cache-Control: no-cache
DEBUG &gt; Date: Tue, 27 Mar 2012 17:42:56 GMT
DEBUG &gt; Authorization:
DEBUG &gt;
DEBUG &lt; HTTP/1.1 200 Ok
...
DEBUG &lt; HTTP/1.1 200 Ok
DEBUG &lt; Date: Tue, 27 Mar 2012 17:43:05 GMT
DEBUG &lt; Connection: close
DEBUG &lt; Cache-Control: no-cache
DEBUG &lt;
INFO * speedtest: collect...done [in 67.6 ms]
DEBUG * publish: testdone
DEBUG state: idle {}
DEBUG * publish: statechange
</pre>
<p>Neubot stops copying logs when the 'testdone' event is
generated.  This event should be generated at the end
of a test, whatever the result.</p>
<p>Streaming is a nice feature.  I would probably include
it in a specification because it allows for transparency
in the tool.  But I will leave it optional, so a tool
can choose whether to support it or not.  (Or it can be
implemented after some time, when the tool has become
stable).</p>
</div>
<div class="section" id="how-do-i-get-debugging-info">
<h3>9.5. How do I get debugging info?</h3>
<p>To get debugging information use the /api/debug API. Please
note that this is useful only to developers and the consistency
of the format is not guaranteed.</p>
<p>This is an example of a debug request and its output:</p>
<pre class="literal-block">
$ curl -o- http://127.0.0.1:9774/api/debug
{'WWW': '/usr/share/neubot/www',
 'notifier': {'_subscribers': {},
              '_timestamps': {'statechange': 1336727245277393,
                              'testdone': 1336727245277246}},
 'poller': {'readset': {5: listener at ('127.0.0.1', 9774)}, 'writeset': {}},
 'queue_history': [],
 'typestats': {'ABCMeta': 26,
               'BackendNeubot': 1,
               'BackendProxy': 1,
               'CDLL': 1,
               'CFunctionType': 5,
               'ClientRendezvous': 1,
               'CodecInfo': 5,
               'Config': 1,
               'ConfigDict': 1,
               'Context': 3,
               'DatabaseManager': 1,
               'Decimal': 6,
               'EmptyNodeList': 1,
               'Event': 5,
               'FileSystemPOSIX': 1,
               'Formatter': 1,
               'JSONDecoder': 3,
               'JSONEncoder': 3,
               'LazyImporter': 19,
               'LibraryLoader': 2,
               'Listener': 1,
               'Logger': 1,
               'Manager': 1,
               'MemoryError': 1,
               'Message': 3,
               'NegotiateServer': 1,
               'NegotiateServerBitTorrent': 1,
               'NegotiateServerSpeedtest': 1,
               'Notifier': 1,
               'NotifierBrowser': 1,
               'Profiler': 1,
               'PyCFuncPtrType': 8,
               'PyCPointerType': 2,
               'PyCSimpleType': 26,
               'PyDLL': 1,
               'Quitter': 2,
               'Random': 1,
               'RandomBlocks': 1,
               'RootLogger': 1,
               'RunnerCore': 1,
               'RunnerTests': 1,
               'RunnerUpdates': 1,
               'RuntimeError': 1,
               'Scanner': 3,
               'ServerAPI': 1,
               'ServerHTTP': 1,
               'ServerStream': 1,
               'SocketWrapper': 1,
               'SpeedtestServer': 1,
               'SpeedtestWrapper': 1,
               'SplitResult': 5,
               'State': 1,
               'StgDict': 37,
               'Task': 5,
               'TypeInfo': 10,
               'UUID': 4,
               'WeakSet': 78,
               '_Condition': 2,
               '_Event': 1,
               '_FuncPtr': 2,
               '_Helper': 1,
               '_Log10Memoize': 1,
               '_MainThread': 1,
               '_Printer': 3,
               '_RLock': 3,
               '_TemplateMetaclass': 1,
               '_local': 1,
               '_socketobject': 3,
               '_swapped_meta': 1,
               'abstractproperty': 4,
               'builtin_function_or_method': 841,
               'cell': 1,
               'classmethod': 29,
               'classmethod_descriptor': 20,
               'classobj': 103,
               'defaultdict': 5,
               'deque': 19,
               'dict': 984,
               'error': 1,
               'frame': 25,
               'frozenset': 21,
               'function': 3168,
               'generator': 1,
               'getset_descriptor': 382,
               'instance': 17,
               'instancemethod': 75,
               'itemgetter': 42,
               'list': 425,
               'listiterator': 2,
               'member_descriptor': 307,
               'method_descriptor': 697,
               'module': 235,
               'partial': 14,
               'property': 112,
               'set': 184,
               'staticmethod': 29,
               'traceback': 8,
               'tuple': 672,
               'type': 251,
               'weakref': 803,
               'wrapper_descriptor': 1214}}
</pre>
</div>
<div class="section" id="home-page-redirections">
<h3>9.6. Home page redirections</h3>
<p>The API /api/index is used to redirect the user to
/index.html or /privacy.html depending on whether he
has already set privacy permission or not.</p>
<p>This is an example of its usage:</p>
<pre class="literal-block">
$ curl -o- http://127.0.0.1:9774/api/index
&lt;HTML&gt;
 &lt;HEAD&gt;
  &lt;TITLE&gt;Found&lt;/TITLE&gt;
 &lt;/HEAD&gt;
 &lt;BODY&gt;
  You should go to &lt;A HREF=&quot;/index.html&quot;&gt;/index.html&lt;/A&gt;.
 &lt;/BODY&gt;
&lt;/HTML&gt;
</pre>
<p>Since in this case privacy permission was already set, we
are redirected to /index.html.</p>
</div>
<div class="section" id="how-do-i-force-neubot-to-exit">
<h3>9.7. How do I force Neubot to exit?</h3>
<p>To exit Neubot, the API /api/neubot can be used. When
Neubot's daemon get this request, it will exit immediately
from the poller's loop, without sending back a message.</p>
<p>Currently this is a cross-platform API, however in the future
we will use it only for Windows systems.</p>
</div>
<div class="section" id="how-do-i-track-neubot-state">
<h3>9.8. How do I track Neubot state?</h3>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">doc/FAQ.rst</tt>, line 1473)</p>
<p>Unknown directive type &quot;TODO&quot;.</p>
<pre class="literal-block">
.. TODO:: write this section

</pre>
</div>
<hr class="docutils"/>
<!--  -->
<!-- Links -->
<!--  -->
</div>
</div>
