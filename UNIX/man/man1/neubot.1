.\" Man page generated from reStructuredText.
.
.TH NEUBOT 1 "@DATE@" "Neubot 0.4.15.7" "Neubot manual"
.SH NAME
neubot \- The network neutrality bot
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" 
.
.\" Copyright (c) 2010-2013
.
.\" Nexa Center for Internet & Society, Politecnico di Torino (DAUIN)
.
.\" and Simone Basso <bassosimone@gmail.com>
.
.\" 
.
.\" This file is part of Neubot <http://www.neubot.org/>.
.
.\" 
.
.\" Neubot is free software: you can redistribute it and/or modify
.
.\" it under the terms of the GNU General Public License as published by
.
.\" the Free Software Foundation, either version 3 of the License, or
.
.\" (at your option) any later version.
.
.\" 
.
.\" Neubot is distributed in the hope that it will be useful,
.
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.
.\" GNU General Public License for more details.
.
.\" 
.
.\" You should have received a copy of the GNU General Public License
.
.\" along with Neubot.  If not, see <http://www.gnu.org/licenses/>.
.
.\" 
.
.SH SYNOPSIS
.nf
\fBneubot\fP \fB\-\-help\fP
\fBneubot\fP \fB\-V\fP
\fBneubot\fP \fIsubcommand\fP ...
.fi
.sp
.SH DESCRIPTION
.sp
Neubot is a free\-software Internet bot that gathers network performance
data useful to investigate network neutrality. Neubot runs in the
background and periodically performs active network tests with test
servers provided by Measurement Lab (a distributed server platform
that hosts open network measurement tools).
.sp
Neubot does not perform any network test until you grant it the
permission to collect and publish your IP address for research
purposes. Neubot behaves like this because it is developed in the
European Union, thus it must comply with European privacy laws
(which consider IP addresses personal data).
.sp
Neubot is a background process. You can control it by using its
subcommands, its web interface or its web API. Neubot listens for
web requests at \fIhttp://127.0.0.1:9774/\fP. To access the web interface,
use either your favorite browser or the \fIviewer\fP subcommand. To
change the address and/or port where Neubot listens for web requests,
edit \fI/etc/neubot/api\fP.
.sp
On UNIX, Neubot runs with the privileges of the \fB_neubot\fP user
or with the ones of the user indicated in the \fI/etc/neubot/users\fP
configuration file.  On Windows, Neubot is run in the context of
the user session and has user privileges.
.sp
The command line interface allows you to get the usage string
(\fIneubot \-\-help\fP), get the version number (\fIneubot \-V\fP), and run a
Neubot\(aqs subcommand (\fIneubot subcommand...\fP).
.SH SUBCOMMANDS
.sp
This section documents Neubot\(aqs subcommands.
.INDENT 0.0
.TP
.B neubot bittorrent [\-6fv] [\-A address] [\-p port]
Asks Neubot to run a \fIbittorrent\fP test using the web API and fails
if Neubot is not running in the background.
.sp
Accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-6
Prefer IPv6 to IPv4.
.TP
.BI \-A \ address
Address of the remote test server.
.TP
.B \-f
Force the test. Run the test in the local process context
(instead of using the web API) and override privacy
settings if needed. Useful for developers and for debugging.
.TP
.B \-p
Port of the remote test server.
.TP
.B \-v
Makes the command more verbose.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot database [\-f database] [action]
Performs the specified \fIaction\fP, or prints the database\(aqs path
if no action is specified.  We do not recommended to use this
command to modify the database while Neubot is running, since
Neubot\(aqs code is not ready for that. \fIOn UNIX systems\fP, this
command requires root privileges to modify the database: if you
are not root, the database is opened in readonly mode.
.sp
Accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.BI \-f \ database
Force file. Forces the command to use \fIdatabase\fP instead of the default
database path.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Implements the following actions:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B delete_all
Deletes all the results in the database.
.TP
.B dump
Dumps to the standard ouput the content of the database in JSON format.
.TP
.B prune
Removes results older than one year.
.TP
.B regen_uuid
Generates a new random unique identifier (or UUID) for Neubot.
.TP
.B show
Pretty prints to the standard ouput the content of the database
in JSON format.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot privacy [\-Pt] [\-D setting=value] [\-f database]
Manage privacy settings. When invoked without
options, this command prints the privacy settings value.
.sp
Accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-D setting=value
Set privacy setting value. When value is \fI0\fP the privacy setting
is "off", otherwise it is "on".
.sp
Note: this command just modifies the database: you have to
restart Neubot to make changes effective. To modify privacy
settings when Neubot is running, we recommend to use the
web interface.
.sp
Privacy settings:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B informed
The user has read the privacy policy.
.TP
.B can_collect
The user provides the permission to collect his/her IP
address for research purposes.
.TP
.B can_publish
The user provides the permission to publish his/her IP
address allowing anyone to reuse it for research purposes.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Note: Neubot performs network tests only when all privacy
settings are "on".
.UNINDENT
.INDENT 0.0
.TP
.BI \-f \ database
Force file. Forces the command to use database instead of the
default database path.
.TP
.B \-P
Prints privacy policy on the standard output.
.TP
.B \-t
Test.  Exits with success (exit value \fI0\fP) if privacy
settings are all nonzero.  Exits with failure (exit value
\fInonzero\fP) if at least one setting is zero.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot raw [\-6fv] [\-A address] [\-p port]
Asks Neubot to run a \fIraw\fP test using the web API and fails if
Neubot is not running in the background.
.sp
Accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-6
Prefer IPv6 to IPv4.
.TP
.BI \-A \ address
Address of the remote test server.
.TP
.B \-f
Force the test. Run the test in the local process context
(instead of using the web API) and override privacy
settings if needed. Useful for developers and for debugging.
.TP
.B \-p
Port of the remote test server.
.TP
.B \-v
Makes the command more verbose.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot speedtest [\-6fv] [\-A address] [\-p port]
Asks Neubot to run a \fIspeedtest\fP test using the web API and fails
if Neubot is not running in the background.
.sp
Accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-6
Prefer IPv6 to IPv4.
.TP
.BI \-A \ address
Address of the remote test server.
.TP
.B \-f
Force the test. Run the test in the local process context
(instead of using the web API) and override privacy
settings if needed. Useful for developers and for debugging.
.TP
.B \-p
Port of the remote test server.
.TP
.B \-v
Makes the command more verbose.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot start
\fIOn MacOS\fP this command runs launchctl(1), which in turn starts
Neubot. You must be root to run this command.  On MacOS, Neubot\(aqs
installer configures the system to launch Neubot at startup; i.e.,
you do not typically need to run this command.
.sp
On MacOS, the start command accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-d
Debug. When this flag is specified, Neubot runs in
the foreground.
.TP
.B \-n
No auto\-updates. When this flag is specified, the privileged
daemon does not check for updates.
.TP
.B \-v
Verbose. When this flag is specified, the start command
is verbose (i.e., it prints on the standard error
the commands it is about to invoke).
.sp
When both \-v and \-d are specified, Neubot runs in verbose mode
in the foreground.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fIOn Windows\fP, the start command runs Neubot with the privileges
of the user that invokes it. On Windows, Neubot is run when a
user logs in and runs in the context of the user\(aqs session.
.sp
On Windows, the start command accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-k
Kill. When \-k is specified, Neubot kills an already
running Neubot instance (if any) before starting up.
.sp
This is used by the automatic updates process: once the new
version of Neubot is downloaded and installed, the old version
executes it with \fIstart \-k\fP.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fIOn other UNIX systems\fP, the start command forks the Neubot daemon,
which drops root privileges and runs in the background.  On such
systems, this command does not accept any command line option.
.TP
.B neubot status
This command asks the status of Neubot using the web API.  It
returns 0 if connect() succeeds and the response is OK, nonzero
otherwise.
.sp
\fIOn Windows and MacOS\fP this command accepts the \fI\-v\fP option,
which makes it more verbose. \fIOn other UNIX systems\fP, it does
not accept any command line option.
.TP
.B neubot stop
\fIOn MacOS\fP, this command runs launchctl(1), which in turn stops
Neubot. You must be root to run this command. On MacOS, this
command accepts the \fI\-v\fP option, which makes it more verbose.
.sp
\fIOn Windows and other UNIX systems\fP, this command uses the web
API to request Neubot to exit.
.TP
.B neubot viewer [\-A address] [\-p port]
Application that shows the web interface by embedding a web
rendering engine into a window manager\(aqs window.
.sp
By default, this command uses 127.0.0.1 as the address and 9774
as the port. Override the default with by editing the \fI/etc/neubot/api\fP
configuration file. Override the configuration file by using the
command line, as follows:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.BI \-A \ address
Override address where Neubot is listening.
.TP
.BI \-p \ port
Override port where Neubot is listening.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SH FILES
.sp
Assuming that Neubot is installed at \fB/usr/local\fP, this is the
list of the files installed.
.INDENT 0.0
.TP
.B /etc/neubot/api
Configuration file that indicates the endpoint where Neubot should
listen for web API requests. Example (which also indicates the
default values):
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
address 127.0.0.1  # Address where the listen
port 9774          # Port where to listen
.ft P
.fi
.UNINDENT
.UNINDENT
.TP
.B /etc/neubot/users
Configuration file that indicates the unprivileged user names
that Neubot should use. Example (which also indicates the default
values):
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
update_user _neubot_update  # For auto\-updates (MacOS\-only)
unpriv_user _neubot         # For network tests
.ft P
.fi
.UNINDENT
.UNINDENT
.TP
.B /usr/local/bin/neubot
The neubot executable script.
.TP
.B /usr/local/share/neubot/*
Location where neubot Python modules are installed.
.TP
.B /usr/local/share/neubot/www/*
Location where the web user interface files are installed.
.TP
.B /user/local/share/neubot/www/test/foo.html
Description of the \fIfoo\fP test. It is included into the results.html
page when the test is selected.
.TP
.B /user/local/share/neubot/www/test/foo.json
Description of the plots and tables included into results.html
when test \fIfoo\fP is selected. The \fIrecipe\fP that specifies how to
compute the values to plot and/or write into the tables is written
in a domain\-specific language based on LISP. We describe this
language below, in the \fI\%RECIPE DSL\fP section.
.TP
.B /user/local/share/neubot/www/test/foo.json.local
User\-modified \fIfoo.json\fP file. When \fIfoo.json.local\fP is present on
the filesystem, Neubot uses the user\-modified version instead
of the the stock version. Allows you to heavily customize the
results page of the \fIfoo\fP experiment.
.TP
.B /var/lib/neubot/database.sqlite3
System\-wide results database for Linux systems, created when the
neubot daemon starts for the first time.
.TP
.B /var/neubot/database.sqlite3
System\-wide results database for UNIX systems (except Linux),
created when the neubot daemon starts for the first time.
.UNINDENT
.SH EXAMPLES
.sp
In this section we represent the unprivileged user prompt with \fI$\fP
and the root user prompt with \fI#\fP.
.sp
Run ondemand \fIbittorrent\fP test:
.nf

.in +2
$ neubot bittorrent
.in -2
.fi
.sp
.sp
Run ondemand \fIraw\fP test:
.nf

.in +2
$ neubot raw
.in -2
.fi
.sp
.sp
Run ondemand \fIspeedtest\fP test:
.nf

.in +2
$ neubot speedtest
.in -2
.fi
.sp
.sp
Start \fBneubot\fP:
.nf

.in +2
# neubot start
.in -2
.fi
.sp
.sp
Stop \fBneubot\fP
.nf

.in +2
# neubot stop  # MacOS
$ neubot stop  # other UNIX
.in -2
.fi
.sp
.sp
Run neubot in foreground with verbose logging "on":
.nf

.in +2
# neubot start \-dv                       # MacOS
$ neubot agent \-v \-D agent.daemonize=no  # other UNIX
.in -2
.fi
.sp
.sp
Export system\-wide results to JSON:
.nf

.in +2
# neubot database dump > output.json
.in -2
.fi
.sp
.sp
Run Neubot \fIcommand\fP from the sources directory:
.nf

.in +2
$ ./bin/neubot \fIcommand\fP
.in -2
.fi
.sp
.SH IMPLEMENTED TESTS
.sp
TBD
.SH WEB USER INTERFACE
.sp
TBD
.SH WEB API
.sp
TDB
.SH RECIPE DSL
.sp
TBD
.SH PRIVACY
.\" :Version: 2.0.3
.
.sp
The Neubot project is a research effort that aims to study the quality
and neutrality of ordinary users\(aq Internet connections, to rebalance the
information asymmetry between them and Service Providers.  The Neubot
software (i) \fImeasures\fP the quality and neutrality of your Internet
connection.  The raw measurement results are (ii) \fIcollected\fP on the
measurement servers for research purposes and (iii) \fIpublished\fP, to allow
other individuals and institutions to reuse them for research purposes.
.sp
To \fImeasure\fP the quality and neutrality of your Internet connection,
the Neubot software does not monitor or analyze your Internet traffic.
It just uses a fraction of your connection capacity to perform background
transmission tests, sending and/or receiving random data.  The results
contain the measured performance metrics, such as the download speed,
or the latency, as well as your computer load, as a percentage, and
\fIyour Internet address\fP.
.sp
The Internet address is paramount because it allows to \fIinfer your Internet
Service Provider\fP and to have a rough idea of \fIyour location\fP, allowing to
put the results in context.  The Neubot project needs to \fIcollect\fP it
to study the data and wants to \fIpublish\fP it to enable other individuals
and institutions to carry alternative studies and/or peer\-review its
measurements and data analysis methodology.  This is coherent with the
policy of the distributed server platform that empowers the Neubot
project, Measurement Lab (M\-Lab), which requires all results to be
released as open data [1].
.sp
You are reading this privacy policy because Neubot is developed in the
European Union, where there is consensus that Internet addresses are
\fIpersonal data\fP.  This means that the Neubot project cannot store, process
or publish your address without your prior \fIinformed consent\fP, under the
provisions of the "Codice in materia di protezione dei dati personali"
(Decree 196/03) [2].  In accordance with the law, data controller is the
NEXA Center for Internet & Society [3], represented by its co\-director Juan
Carlos De Martin.
.sp
Via its web interface [4], the Neubot software asks you (a) to explicitly
assert that you are \fIinformed\fP, i.e. that you have read the privacy
policy, (b) to give it the permission to \fIcollect\fP and (c) \fIpublish\fP your
IP address.  If you do not assert (a) and you don\(aqt give the permission
to do (b) and (c), Neubot cannot run tests because, if it did, it would
violate privacy laws and/or Measurement Lab policy.
.sp
The data controller guarantees you the rights as per Art. 7 of the
above\-mentioned Decree 196/03.  Basically, you have total control over
you personal data, and you can, for example, inquire Neubot to remove
your Internet address from its data sets.  To exercise your rights, please
write to <\fI\%privacy@neubot.org\fP> or to "NEXA Center for Internet & Society,
Dipartimento di Automatica e Infomatica, Politecnico di Torino, Corso Duca
degli Abruzzi 24, 10129 Turin, ITALY."
.IP [1] 5
\fI\%http://www.measurementlab.net/about\fP
.IP [2] 5
\fI\%http://www.garanteprivacy.it/garante/doc.jsp?ID=1311248\fP
.IP [3] 5
\fI\%http://nexa.polito.it/\fP
.IP [4] 5
\fI\%http://127.0.0.1:9774/privacy.html\fP
.SH AUTHOR
.sp
Neubot authors are:
.nf

Simone Basso                  <\fI\%bassosimone@gmail.com\fP>
Antonio Servetti              <\fI\%antonio.servetti@polito.it\fP>
.fi
.sp
.sp
The following people have contributed patches to the project:
.nf

Alessio Palmero Aprosio       <\fI\%alessio@apnetwork.it\fP>
Roberto D\(aqAuria               <\fI\%everlastingfire@autistici.org\fP>
Marco Scopesi                 <\fI\%marco.scopesi@gmail.com\fP>
.fi
.sp
.sp
The following people have helped with internationalization:
.nf

Claudio Artusio               <\fI\%claudioartusio@gmail.com\fP>
.fi
.sp
.SH COPYRIGHT
.nf
Copyright (c) 2010\-2013 Nexa Center for Internet & Society,
.in +2
Politecnico di Torino (DAUIN)
.in -2
.fi
.sp
.nf
Neubot is free software: you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation, either version
3 of the License, or (at your option) any later version.
.fi
.sp
.SH SEE ALSO
.nf
\fBhttp://www.neubot.org/\fP
\fBhttp://github.com/neubot/neubot\fP
\fBhttp://twitter.com/neubot\fP
.fi
.sp
.\" Generated by docutils manpage writer.
.
