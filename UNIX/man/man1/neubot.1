.\" Man page generated from reStructeredText.
.
.TH NEUBOT 1 "@DATE@" "Neubot 0.4.15.7" "Neubot manual"
.SH NAME
neubot \- The network neutrality bot
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" 
.
.\" Copyright (c) 2010-2013
.
.\" Nexa Center for Internet & Society, Politecnico di Torino (DAUIN)
.
.\" and Simone Basso <bassosimone@gmail.com>
.
.\" 
.
.\" This file is part of Neubot <http://www.neubot.org/>.
.
.\" 
.
.\" Neubot is free software: you can redistribute it and/or modify
.
.\" it under the terms of the GNU General Public License as published by
.
.\" the Free Software Foundation, either version 3 of the License, or
.
.\" (at your option) any later version.
.
.\" 
.
.\" Neubot is distributed in the hope that it will be useful,
.
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.
.\" GNU General Public License for more details.
.
.\" 
.
.\" You should have received a copy of the GNU General Public License
.
.\" along with Neubot.  If not, see <http://www.gnu.org/licenses/>.
.
.\" 
.
.SH SYNOPSIS
.nf
\fBneubot\fP \fB\-\-help\fP
\fBneubot\fP \fB\-V\fP
\fBneubot\fP \fIsubcommand\fP ...
.fi
.sp
.SH DESCRIPTION
.sp
Neubot (the network neutrality bot) is a free\-software Internet bot
that gathers network performance data useful to investigate network
neutrality.  It runs in the background and periodically performs
active network tests with test servers (see the \fI\%Implemented
tests\fP section).
.sp
Neubot tests results contain the user\(aqs IP address that is personal
data in the European Union. Therefore, Neubot does not perform any
test until the user provides his/her informed consent (see
\fI\%PRIVACY\fP).
.sp
When Neubot is running, you can interact with it either using its
subcommands (see \fI\%SUBCOMMANDS\fP) or using directly the Web API (see
\fI\%WEB API\fP). The Web API is available at the \fINeubot endpoint\fP;
i.e., the endpoint where Neubot is listening. This endpoint is
\fI127.0.0.1:9774\fP by default, and you can edit \fI$CONFIG/api\fP to
change its value (see \fI\%FILES\fP).
.sp
On UNIX systems, Neubot forks off an unprivileged child to run
network tests. This child runs as the unprivileged _neubot user.
You can edit \fI$CONFDIR/users\fP to change the unprivileged user name
(see \fI\%FILES\fP).
.sp
The first form of the command (\fIneubot \-\-help\fP) prints on the
standard output a brief help message. The second form of the command
(\fIneubot \-V\fP) prints on the standard output the version number.  The
third form of the command (\fIneubot subcommand...\fP) runs the specified
\fIsubcommand\fP.
.SH SUBCOMMANDS
.sp
Here we document Neubot subcommands.
.INDENT 0.0
.TP
.B neubot bittorrent [\-6fv] [\-A address] [\-p port]
This command connects to the Neubot endpoint and requests Neubot
to run a \fIbittorrent\fP test using the \fIrunner\fP Web API.
.sp
This command accepts the following command line options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-6
Prefer IPv6 to IPv4.
.TP
.BI \-A \ address
Address of the remote test server.
.TP
.B \-f
Force. Run the command in the local process context (i.e, don\(aqt use
the Web API) and override privacy settings if needed.
.TP
.B \-p
Port of the remote test server.
.TP
.B \-v
Make the command more verbose.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot database [\-f database] [action]
This command performs the specified \fIaction\fP, or prints the database\(aqs
path if no action is specified.  We do not recommended to use this
command to modify the database while Neubot is running, since Neubot\(aqs
code is not ready for that. \fIOn UNIX systems\fP, this command requires
root privileges to modify the database: if you are not root, the
database is opened in readonly mode.
.sp
This command accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.BI \-f \ database
Force the command to use \fIdatabase\fP instead of the default
database path (see \fI\%FILES\fP).
.UNINDENT
.UNINDENT
.UNINDENT
.sp
This command implements the following actions:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B delete_all
Delete all the results in the database.
.TP
.B dump
Dump to the standard ouput the content of the database in JSON format.
.TP
.B prune
Remove results older than one year from the database.
.TP
.B regen_uuid
Generates a new Neubot random unique identifier (each Neubot has
its own random unique identifier, which is used to perform time
series analysis).
.TP
.B show
Pretty prints to the standard ouput the content of the database
in JSON format.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot raw [\-6fv] [\-A address] [\-p port]
This command connects to the Neubot endpoint and requests Neubot
to run a \fIraw\fP test using the \fIrunner\fP Web API.
.sp
This command accepts the following command line options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-6
Prefer IPv6 to IPv4.
.TP
.BI \-A \ address
Address of the remote test server.
.TP
.B \-f
Force. Run the command in the local process context (i.e, don\(aqt use
the Web API) and override privacy settings if needed.
.TP
.B \-p
Port of the remote test server.
.TP
.B \-v
Make the command more verbose.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot speedtest [\-6fv] [\-A address] [\-p port]
This command connects to the Neubot endpoint and requests Neubot
to run a \fIspeedtest\fP test using the \fIrunner\fP Web API.
.sp
This command accepts the following command line options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-6
Prefer IPv6 to IPv4.
.TP
.BI \-A \ address
Address of the remote test server.
.TP
.B \-f
Force. Run the command in the local process context (i.e, don\(aqt use
the Web API) and override privacy settings if needed.
.TP
.B \-p
Port of the remote test server.
.TP
.B \-v
Make the command more verbose.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot start
\fIOn MacOS\fP this command runs launchctl(1), which in turn starts
Neubot. On MacOS, Neubot\(aqs installer configures the system to run Neubot
at startup, which means you don\(aqt typically need to run this
command. You must be root to run this command.
.sp
On MacOS Neubot is implemented by two daemon processes. A privileged
daemon that forks unprivileged childs to check for updates and an
unprivileged daemon that performs network tests. The start command
controls the privileged daemon, which in turn controls the unprivileged
daemon.
.sp
On MacOS, the start command accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-d
Debug. When this flag is specified, Neubot runs in
the foreground.
.TP
.B \-n
No auto\-updates. When the \-n flag is specified, the privileged
daemon does not check for updates and only controls the
unprivileged daemon.
.TP
.B \-v
Verbose. When this flag is specified, the start command
is verbose (i.e., it prints on the standard error
the commands it is about to invoke).
.sp
When both \-v and \-d are specified, Neubot runs in verbose mode
in the foreground.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fIOn Windows\fP, the start command runs Neubot with the privileges
of the user that invokes it. On Windows, Neubot\(aqs installer configures
the system to start Neubot when a user logs in. Therefore Neubot
runs in the context of the user\(aqs session.
.sp
On Windows, the start command accepts the following options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-k
Kill. When \-k is specified, Neubot kills an already
running Neubot instance (if any) before starting up.
.sp
This is used by the automatic updates process: once the new
version of Neubot is downloaded and installed, the old version
executes it with \fIstart \-k\fP.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fIOn other UNIX systems\fP, the start command forks the Neubot
damon, which drops privileges and runs in the background.
On such systems, this command does not accept any command line
option.
.TP
.B neubot status
This command connects to the Neubot endpoint and sends a \fIapi\fP
Neubot Web API request.  It returns \fIzero\fP if connect() succeeds
and the response is OK, \fIone\fP otherwise.
.sp
\fIOn Windows and MacOS\fP this command accepts the \fI\-v\fP option,
which makes it more verbose. \fIOn other UNIX systems\fP, it does
not accept any command line option.
.TP
.B neubot stop
\fIOn MacOS\fP, this command runs launchctl(1), which in turn stops
Neubot. You must be root to run this command. On MacOS, this
command accepts the \fI\-v\fP option, which makes it more verbose.
.sp
\fIOn Windows and other UNIX systems\fP, this command connects to the
Neubot endpoint and sends a \fIstop\fP Web API request. In turn, this
forces Neubot to exit.
.TP
.B neubot privacy [\-Pt] [\-D setting] [\-f database]
Allows to read privacy policy, test and set privacy settings.  For
more information on privacy see the \fI\%PRIVACY\fP section.  This subcommand
accepts the following command line options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.BI \-D \ setting
Allow to set privacy settings in the database.  The following
privacy settings are defined, along with their default value:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B privacy.informed=""
Turns on (\fInonzero\fP) or off (\fI0\fP) the corresponding privacy
setting in the database, unless the setting is unspecified
(\fI""\fP).
.TP
.B privacy.can_collect=""
Turns on (\fInonzero\fP) or off (\fI0\fP) the corresponding privacy
setting in the database, unless the setting is unspecified
(\fI""\fP).
.TP
.B privacy.can_publish=""
Turns on (\fInonzero\fP) or off (\fI0\fP) the corresponding privacy
setting in the database, unless the setting is unspecified
(\fI""\fP).
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Note that all privacy settings must be on for \fBneubot\fP to be
allowed to run automatic tests.
.sp
Note that this command changes the database, but changes are not
propagated to the \fBneubot\fP instance running in background.
.TP
.BI \-f \ database
Force to use the database at \fIdatabase\fP instead of using the
default one (see \fI\%FILES\fP section for more info).
.TP
.B \-P
Prints privacy policy on the standard output.
.TP
.B \-t
Test mode.  Exits with success (exit value \fI0\fP) if privacy
settings allow to run periodic tests.  Exits with failure (exit
value \fInonzero\fP) otherwise.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B neubot viewer [\-f file] [\-O option]
Starts a viewer application that embeds the Web User Interface, if
the dependencies are installed.  By default, the viewer connects to
\fI127.0.0.1:9774\fP, but that can be changed specifying an alternate
configuration file or overriding options from command line.
.sp
Accepts the following command line options:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.BI \-f \ file
Forces to read settings from \fIfile\fP, instead of using the default
configuration file \fB/etc/neubot/api\fP.  If the file does not
exist or contains errors, this subcommand will ignore it and will
continue with default settings.
.sp
The following options are recognized (here the options are
represented together with their default values):
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B address 127.0.0.1
Address where the Web API is supposed to be listening.
.TP
.B port 9774
Port where the Web API is supposed to be listening.
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.BI \-O \ option
Overrides configuration file option from the command line,
see description of \fB\-f\fP flag for the list of available
options.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SH WEB USER INTERFACE
.sp
TBD
.SH WEB API
.sp
TDB
.SH IMPLEMENTED TESTS
.sp
TBD
.SH PRIVACY
.\" :Version: 2.0.3
.
.sp
The Neubot project is a research effort that aims to study the quality
and neutrality of ordinary users\(aq Internet connections, to rebalance the
information asymmetry between them and Service Providers.  The Neubot
software (i) \fImeasures\fP the quality and neutrality of your Internet
connection.  The raw measurement results are (ii) \fIcollected\fP on the
measurement servers for research purposes and (iii) \fIpublished\fP, to allow
other individuals and institutions to reuse them for research purposes.
.sp
To \fImeasure\fP the quality and neutrality of your Internet connection,
the Neubot software does not monitor or analyze your Internet traffic.
It just uses a fraction of your connection capacity to perform background
transmission tests, sending and/or receiving random data.  The results
contain the measured performance metrics, such as the download speed,
or the latency, as well as your computer load, as a percentage, and
\fIyour Internet address\fP.
.sp
The Internet address is paramount because it allows to \fIinfer your Internet
Service Provider\fP and to have a rough idea of \fIyour location\fP, allowing to
put the results in context.  The Neubot project needs to \fIcollect\fP it
to study the data and wants to \fIpublish\fP it to enable other individuals
and institutions to carry alternative studies and/or peer\-review its
measurements and data analysis methodology.  This is coherent with the
policy of the distributed server platform that empowers the Neubot
project, Measurement Lab (M\-Lab), which requires all results to be
released as open data [1].
.sp
You are reading this privacy policy because Neubot is developed in the
European Union, where there is consensus that Internet addresses are
\fIpersonal data\fP.  This means that the Neubot project cannot store, process
or publish your address without your prior \fIinformed consent\fP, under the
provisions of the "Codice in materia di protezione dei dati personali"
(Decree 196/03) [2].  In accordance with the law, data controller is the
NEXA Center for Internet & Society [3], represented by its co\-director Juan
Carlos De Martin.
.sp
Via its web interface [4], the Neubot software asks you (a) to explicitly
assert that you are \fIinformed\fP, i.e. that you have read the privacy
policy, (b) to give it the permission to \fIcollect\fP and (c) \fIpublish\fP your
IP address.  If you don\(aqt assert (a) and you don\(aqt give the permission
to do (b) and (c), Neubot cannot run tests because, if it did, it would
violate privacy laws and/or Measurement Lab policy.
.sp
The data controller guarantees you the rights as per Art. 7 of the
above\-mentioned Decree 196/03.  Basically, you have total control over
you personal data, and you can, for example, inquire Neubot to remove
your Internet address from its data sets.  To exercise your rights, please
write to <\fI\%privacy@neubot.org\fP> or to "NEXA Center for Internet & Society,
Dipartimento di Automatica e Infomatica, Politecnico di Torino, Corso Duca
degli Abruzzi 24, 10129 Turin, ITALY."
.IP [1] 5
\fI\%http://www.measurementlab.net/about\fP
.IP [2] 5
\fI\%http://www.garanteprivacy.it/garante/doc.jsp?ID=1311248\fP
.IP [3] 5
\fI\%http://nexa.polito.it/\fP
.IP [4] 5
\fI\%http://127.0.0.1:9774/privacy.html\fP
.SH EXAMPLES
.sp
In this section we will follow the well\-established convention of
representing the unprivileged user prompt with \fI$\fP and the privileged
user prompt with \fI#\fP.
.sp
Run ondemand speedtest test:
.nf

.in +2
$ neubot speedtest
.in -2
.fi
.sp
.sp
Run ondemand BitTorrent test:
.nf

.in +2
$ neubot bittorrent
.in -2
.fi
.sp
.sp
Start \fBneubot\fP:
.nf

.in +2
# neubot start
.in -2
.fi
.sp
.sp
Stop \fBneubot\fP:
.nf

.in +2
$ neubot stop
.in -2
.fi
.sp
.sp
Run the client\-side components of \fBneubot\fP in foreground and in debug
mode for debugging purposes:
.nf

.in +2
$ neubot agent \-v \-D agent.daemonize=no
.in -2
.fi
.sp
.sp
Export system\-wide results to JSON:
.nf

.in +2
# neubot database dump > output.json
.in -2
.fi
.sp
.sp
Track \fBneubot\fP state using the command line:
.nf

.in +2
$ neubot api.client
.in -2
.fi
.sp
.sp
Run Neubot in\-place from the sources directory:
.nf

.in +2
$ ./bin/neubot \fIcomand\fP
.in -2
.fi
.sp
.SH FILES
.sp
Neubot can be installed below many different prefixes (the most common
ones being \fB/usr/local\fP and \fB/usr\fP). In this section of the manual
we assume that it has been installed below \fB/usr/local\fP:
.INDENT 0.0
.TP
.B /usr/local/bin/neubot
The neubot program, a simple python script that imports neubot and passes
the control to \fBneubot.main\fP module.
.TP
.B /usr/local/share/neubot/*
Location where neubot python modules are installed.
.TP
.B /usr/local/share/neubot/main/__init__.py
Well\-known location of the real main() of Neubot.  This is the
standard entry point to Neubot.
.TP
.B /usr/local/share/neubot/updater/unix.py
Well\-known location of the updater daemon for Unix.  This is an
alternative entry point to Neubot.
.TP
.B /var/neubot/database.sqlite3
System\-wide results database for UNIX systems (except Linux),
created when the neubot daemon starts for the first time.
.TP
.B /var/lib/neubot/database.sqlite3
System\-wide results database for Linux systems, created when the
neubot daemon starts for the first time.
.UNINDENT
.SH BUGS
.sp
If the default browser is a textual browser and a graphical environment
is available, Neubot will start the web user interface into the
textual browser.  Nine times out of ten this results into an unusable
web user interface because most textual browser do not support
javascript.
.sp
Neubot is reported to be "not running" by \fIneubot start\fP also when
the response is not \fI200 Ok\fP.
.SH AUTHOR
.sp
Neubot authors are:
.nf

Simone Basso                  <\fI\%bassosimone@gmail.com\fP>
Antonio Servetti              <\fI\%antonio.servetti@polito.it\fP>
.fi
.sp
.sp
The following people have contributed patches to the project:
.nf

Alessio Palmero Aprosio       <\fI\%alessio@apnetwork.it\fP>
Roberto D\(aqAuria               <\fI\%everlastingfire@autistici.org\fP>
Marco Scopesi                 <\fI\%marco.scopesi@gmail.com\fP>
.fi
.sp
.sp
The following people have helped with internationalization:
.nf

Claudio Artusio               <\fI\%claudioartusio@gmail.com\fP>
.fi
.sp
.SH COPYRIGHT
.nf
Copyright (c) 2010\-2012 NEXA Center for Internet & Society
.in +2
at Politecnico di Torino <\fI\%http://nexa.polito.it/\fP>
.in -2
.fi
.sp
.nf
Neubot is free software: you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation, either version
3 of the License, or (at your option) any later version.
.fi
.sp
.SH SEE ALSO
.nf
\fBNeubot | The network neutrality bot <http://www.neubot.org/>\fP
.fi
.sp
.\" Generated by docutils manpage writer.
.\" 
.
